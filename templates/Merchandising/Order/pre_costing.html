{% extends "index.html" %}
{% load widget_tweaks %}
{% load static %}
{% block title %} Lakshma | Pre Costing Form {% endblock title %}
{% block homeactive  %}active{% endblock homeactive  %}

{% block css %}
<style>
    .fabDesSearch {
        border-radius: 0;
        box-shadow: none;
        border: 1px solid #e4e5e7;
        display: block;
        width: 100%;
        height: 26px;
        padding: 2px 12px;
        font-size: 14px;
        line-height: 1.42857143;
        color: #555;
        background-color: #fff;
        background-image: none;
      }
    tfoot {display: table-header-group;}
   .modal {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1050;
    display: none;
    height: 100%;
    overflow: hidden;
    outline: 0;
    }
    .modal-lg{ max-width: 90%;}
    .modal-comm{max-width: 50%;}
    .modal-wash{max-width: 80%;}
    .inpSize input {width:140px;}
    .inpSize select {width:140px;}
    #fabricHide {display:none;}
    #trimHide {display:none;}
    #embllishHide {display:none;}
    #washHide {display:none;}
    #commercialHide {display:none;}
    #commissionHide {display:none;}

    .dzn{display: none;}
    .pcs{ display: none; }
    .cone{ display: none; }

</style>
{% endblock css %}

{% block body %}
<!-- BUDGET PRE-COSTING FORM  -->
    <div class="container">
        <div class="">{% include 'Index/alerts.html' %}</div>
        <div class="d-flex">
        <div class="mr-auto p-2">
            <a type="button" href="{% url 'order_report' %}" class="btn btn-sm btn-info gr"><i class="fa fa-bars" aria-hidden="true"></i> Order Report</a>
        </div>
        <div class="p-2">
            <a  type="btn" class="btn btn-sm btn-light " onClick="javascript:history.go(-1);"><i class="fa fa-undo" aria-hidden="true"></i></a>
        </div>
        </div>
        <div class=" card border border-dark mb-2 mt-2">
        <div class=" p-2  bg-form-header">
            <h5 class="text-uppercase text-center ">nisha i love you</h4>
        </div>
        <div class="container-fluid p-4 bg-form">
            <div class="row">
                <div class="col-md-12 P-4">
                
                    <form method="post" action="{% url 'pre_costing' %}" enctype="multipart/form-data" id="c_form">
                        {% csrf_token %}
                        <input type="hidden" name="_task" value="cost_form">
                        <div class="form-group row ">
                            <label for="job_no" class="col-sm-2 col-form-label">Job No.</label>
                            <div class="col-sm-2 ">
                                <input type="text" class="form-control" name="job_no" placeholder="Dbl. Click Job no" id="job_no" value="{{ fetch.job_no }}" readonly>
                            </div>
                            <label for="company_name" class="col-sm-2 col-form-label label">Company</label>
                            <div class="col-sm-2 ">
                                
                                <input class="form-control" value="{{ fetch.company_name }}" readonly>
                                
                            </div>
                            <label for="company_location" class="col-sm-2 col-form-label label">Quotation ID</label>
                            <div class="col-sm-2 ">
                                {{ form.quotation_id|attr:"class:form-control"}}
                                
                            </div>
                            </div>
                            
    
                            <div class="form-group row ">
                                <label for="style_ref" class="col-sm-2 col-form-label label">Style Ref</label>
                            <div class="col-sm-2 ">
                                <input class="form-control" value="{{ fetch.style_ref }}" readonly>

                            </div>
                            
                            <label for="style_description" class="col-sm-2 col-form-label label">Style Description</label>
                            <div class="col-sm-2 ">
                                <input class="form-control" value="{{ fetch.style_description }}" readonly>

                            </div>
                            <label for="buyer_name" class="col-sm-2 col-form-label ">Buyer Name</label>
                            <div class="col-sm-2 ">
                                <input class="form-control" value="{{ fetch.buyer_name }}" readonly>
                                
                            </div>
                            
                            </div>
                            

                            <div class="table-responsive mt-2">
                                <table class="table table-bordered table-hover table-sm" >
                                    <thead class="bg-table-header">
                                        
                                        <tr>
                                            <th class="text-center label">Prod. Dept. </th>
                                            <th class="text-center"> Currency </th>
                                            <th class="text-center"  width="60px;"> ER </th>
                                            <th class="text-center label">Agent </th>
                                            <th class="text-center label" width="150px;">Job Qty </th>
                                            <th class="text-center label" width="150px;" >Avg. Price </th>
                                            <th class="text-center"> Order Unit </th>
                                            <th class="text-center"  width="150px;" > </th>
                                            <th class="text-center label"> Costing Date </th>
                                            <th class="text-center label">Incoterm </th>


                                        </tr>
                                    </thead>
                                    <tbody >
                                        <tr >
                                            <td >
                                                <input class="form-control" value="{{ fetch.product_dept }}" readonly>
                                                
                                            </td>

                                            <td >
                                                <input class="form-control" value="{{ fetch.currency }}" readonly>
                                            
                                            </td>

                                            <td >
                                                {{ form.er|attr:"class:form-control" }}

                                            </td>
                                            <td >
                                                <input class="form-control" value="{{ fetch.agent }}" readonly>

                                            </td>
                                            <td >
                                                <input class="form-control" name="job_qty" value="{{ total_po }}" readonly>

                                            </td>
                                            <td >
                                                <input  class="form-control" name="avg_rate" value="{{ total_avg_price|floatformat:2 }}" readonly>

                                            </td>
                                            
                                            <td >
                                                <input class="form-control" value="{{ fetch.order_uom }}" readonly>

                                            </td>
                                            <td >
                                                {{ form.item_details|attr:"class:form-control"}}
                                            </td>
                                            <td >
                                            {{ form.costing_date|attr:"class:form-control"|attr:"type:date" }}
                                        </td>
                                        <td >
                                            <input class="form-control" value="{{ fetch.shipment_term }}">
                                        </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="table-responsive mt-2">
                                <table class="table table-bordered table-hover table-sm" >
                                    <thead class="bg-table-header">
                                        <tr>
                                            <th class="text-center"> Incoterm Place </th>
                                            <th class="text-center"> Machine/Line </th>
                                            <th class="text-center"> Prod/Line/Hr </th>
                                            <th class="text-center"> Costing Per  </th>
                                            <th class="text-center label"> Region </th>
                                            <th class="text-center label">Sew. SMV </th>
                                            <th class="text-center"> Sew Efficiency % </th>
                                            <th class="text-center"> Cut SMV</th>
                                        </tr>
                                    </thead>
                                    <tbody >
                                        <tr >
                                            <td >
                                                {{ form.incoterm_place|attr:"class:form-control"}}
                                            </td>
                                            <td >
                                                {{ form.machine_line|attr:"class:form-control"}}
                                            </td>
                                            <td >
                                                {{ form.prod_line|attr:"class:form-control"|attr:"type:text"}}
                                            </td>
                                            <td >
                                                {{ form.costing_per|attr:"class:form-control"}}
                                            </td>
                                            <td >
                                                <input class="form-control" value="{{ fetch.region }}" readonly>
                                            </td>
                                            <td >
                                                <input class="form-control" value="{{ fetch.tt_sew_smv }}" readonly>
                                            </td>
                                            <td >
                                                {{ form.sew_efficiency|attr:"class:form-control" }}
                                            </td>
                                            <td >
                                                <input class="form-control" value="{{fetch.tt_cut_smv}}" readonly>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="table-responsive mt-2">
                                <table class="table table-bordered table-hover table-sm" >
                                    <thead class="bg-table-header">
                                        <tr>
                                            <th class="text-center"> Cut Efficiency % </th>
                                            <th class="text-center"> Reamrks </th>
                                            <th class="text-center"> Budget Minute </th>
                                            <th class="text-center label" width="160px;"> Images </th>
                                            <th class="text-center label" width="160px;">File No.</th>
                                            <th class="text-center"> Internal Ref </th>
                                            <th class="text-center"> Copy Form </th>
                                            <th class="text-center" width="160px;"></th>
                                        </tr>
                                    </thead>
                                    <tbody >
                                        <tr >
                                            <td >
                                                {{ form.cut_efficiency|attr:"class:form-control" }}
                                            </td>
                                            <td >
                                                {{ form.remarks|attr:"class:form-control"|attr:"type:text"|attr:"rows:1"}}
                                            </td>
                                            <td >
                                                {{ form.budget_minute|attr:"class:form-control" }}
                                            </td>
                                            <td >
                                                <img height="30px" width="30px" src="/media/{{fetch.image}}/">
                                            </td>
                                            <td >
                                                {{ form.file_no|attr:"class:form-control"|attr:"type:text"}}
                                            </td>
                                            <td >
                                                <input class="form-control" value="{{fetch.internal_ref}}" readonly>
                                            </td>
                                            <td >
                                                {{ form.copy_form|attr:"class:form-control"|attr:"type:text"|attr:"placeholder:Copy Form"}}
                                            </td>
                                            <td >
                                                <input type="text" class="form-control" placeholder="Copy without consumption" >
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="form-group row mt-2">
                                <label for="company_name" class="col-sm-2 col-form-label label">Ready To Approved</label>
                                <div class="col-sm-2 ">
                                    {{ form.redy_to_approved|attr:"class:form-control"}}
                                </div>
                                <label for="company_name" class="col-sm-2 col-form-label label">Mini Marker Upload</label>
                                <div class="col-sm-2 ">
                                    {{ form.mini_marker_upload|attr:"class:form-control"}}

                                </div>
                                <label for="location_name" class="col-sm-2 col-form-label label">Un-approve Request</label>
                                <div class="col-sm-2 ">
                                    <input type="text" class="form-control" placeholder="Double Click" >
                                </div>
                            </div>
                            <div class="form-group row mt-2">
                                <label for="approved" class="col-sm-2 col-form-label label">Approved</label>
                                <div class="col-sm-2 ">
                                    {{ form.approved|attr:"class:form-control"}}
                                </div>
                            </div>
                            <hr>
                            <div class="mt-2">
                                <button type="submit" name="button1" class="btn btn-success btn-sm" style=" border-radius: 20px;">Save</button>
                            </div>
                    </form>
                    </div>
    
                </div>
            </div>
    
        </div>
    </div>
    <!-- TNA PROCESS MANUAL  -->
    <div class="row mt-3">
            <div class='col-md-3 col-lg-3'>
                <div class="table-responsive bg-form">
                    <form method="post"  enctype="multipart/form-data">
                        {% csrf_token %}
                        <table class="table table-bordered table-sm table-responsive-sm" >
                            <thead>
                                <tr class="bg-info"> 
                                    <th class="text-center bg-form-header"  colspan="7">
                                        <h6>TNA process manual</h6>
                                    </th>
                                </tr>
                                <tr class="bg-table-header">
                                    <th class=" text-center" width="130px;">Cost Comp.</th>
                                    <th class=" text-center">Budgeted Cost</th>
                                    <th class=" text-center">% To Q Price</th>
                                </tr>
                            </thead>
                            <tbody >
                        
                                <tr >
                                    <td class="text-center">
                                        <label for="location_name" >Fabric Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control"  onclick="fabric(event, 'fabricHide');" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control"  >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Trims Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" onclick="trim(event, 'trimHide');">
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Embel Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control"  onclick="embllish(event, 'embllishHide');">
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Gmts. Wash</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" onclick="wash(event, 'washHide');">
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Comml Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" onclick="commercial(event, 'commercialHide');">
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Lab Test</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Inspection</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Freight</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Courier Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Certificate Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Deffd. LC Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Design Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Studio Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                            
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Opert Exp.</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >CM Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Interest</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Income Tax</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Depc & Amount</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Commission</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" onclick="commission(event, 'commissionHide');">
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Total Cost</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Price/1 Dzn</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Margin/1 Dzn</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Price/Piece</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" value="{{ total_avg_price }}">
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" value="100%" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >Final Cost/Pcs</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name">Margin/Pcs</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <label for="location_name" >BOM Margin/Pcs</label>
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                    <td class="text-center">
                                        <input type="text" class="form-control" >
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="mt-2">
                            <button type="submit" class="btn btn-success btn-sm">Save</button>
                            <button type="submit" class="btn btn-info btn-sm">Update</button>
                            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                            <button type="submit" class="btn btn-warning btn-sm">Refresh</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-md-9 col-lg-9" >
                
                <!-- FABRIC COST  -->
                <div class="container-fluid "  id="fabricHide"  >
                    <div id="accordion">
                        <!-- FABRIC COST  -->
                        <div class="card inpSize" >
                            <div class="card-header" id="headingOne">
                                <h5 class="mb-0">
                                <button class="btn btn-link text-dark font-weight-bold" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    + Fabric Cost
                                </button>
                                <span class="text-danger font-weight-bold" style="margin-left: 50%;">Approved</span>
                                </h5>
                            </div>
                            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                                <div class="card-body">
                                    <form method="post" action="{% url 'pre_costing' %}" enctype="multipart/form-data" id="fc_form">
                                        {% csrf_token %}
                                    <input hidden name="_task" value="f_form">
                                    <div class="table-responsive" >
                                        <table class="table table-bordered table-hover table-sm table-responsive-sm add_fc" >
                                            <thead class="bg-info">
                                                <tr>
                                                    <th class="text-center label" width="140px"> Gmts Item </th>
                                                    <th class="text-center label" >Body Part</th>
                                                    <th class="text-center" > Body Part Type </th>
                                                    <th class="text-center" > Fab Nature</th>
                                                    <th class="text-center" > Color Type </th>
                                                    <th class="text-center" > Fabric Source </th>
                                                    <th class="text-center" > Fabric Description </th>
                                                    <th class="text-center" > Nominated Supp </th>
                                                    <th class="text-center" > Width/Dia Type </th>
                                                    <th class="text-center" > GSM/Weight </th>
                                                    <th class="text-center" > Color & Size Sensitive </th>
                                                    <th class="text-center" > Color  </th>
                                                    <th class="text-center" > Consumption Basis </th>
                                                    <th class="text-center" > Uom </th>
                                                    <th class="text-center" > Avg. Grey Cons </th>
                                                    <th class="text-center" > Rate </th>
                                                    <th class="text-center" > Amount </th>
                                                    <th class="text-center" > Total Quantity </th>
                                                    <th class="text-center" > Total Amount </th>
                                                    <th class="text-center"  width="80px;">Action </th>
                                                </tr>
                                            </thead>
                                            {{ form_items_fc.management_form }}
                                            <tbody class="inline_fabric_form">
                                                {% for fc in form_items_fc %}
                                                <tr >
                                                    <td>
                                                        {{ fc.gmts_items|attr:"class:form-control"|attr:"data-target:#gmtsItem"|attr:"data-toggle:modal"|attr:"onclick:passID(id)"}}
                                                    </td>
                                                    <td>
                                                        {{ fc.body_part|attr:"class:form-control"|attr:"data-target:#body_part"|attr:"data-toggle:modal"|attr:"onclick:passID(id)"  }}
                                                    </td>
                                                    <td >
                                                        {{ fc.body_part_type|attr:"class:form-control"|attr:"readOnly"}}
                                                    </td>
                                                    <td >
                                                        {{ fc.fab_nature|attr:"class:form-control" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.color_type|attr:"class:form-control" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.fabric_source|attr:"class:form-control" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.fabric_desc|attr:"class:form-control"|attr:"data-target:#fabricDesc"|attr:"data-toggle:modal"|attr:"onclick:passID(id)" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.nom_supplier|attr:"class:form-control" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.width_dia|attr:"class:form-control" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.gms|attr:"class:form-control"|attr:"readOnly" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.cs_sensitive|attr:"class:form-control"|attr:"onchange:colorContrast(id)" }} 
                                                    </td>
                                                    <td >
                                                        {{ fc.color|attr:"class:form-control"}}
                                                    </td>
                                                    <td >
                                                        {{ fc.con_basis|attr:"class:form-control"}}
                                                    </td>
                                                    <td >
                                                        {{ fc.uom|attr:"class:form-control" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.avg_grey_cons|attr:"class:form-control"|attr:"type:number"|attr:"data-target:#colorSizeInline"|attr:"data-toggle:modal"|attr:"onclick:passColor(id)" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.rate|attr:"class:form-control"|attr:"type:number"|attr:"readOnly" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.amount|attr:"class:form-control"|attr:"type:number"|attr:"readOnly" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.total_quantity|attr:"class:form-control"|attr:"type:number"|attr:"readOnly" }}
                                                    </td>
                                                    <td >
                                                        {{ fc.total_amount|attr:"class:form-control"|attr:"type:number"|attr:"readOnly" }}
                                                    </td>
                                                    <td class="removefc text-center">
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                            <input type="hidden" name="inline_count" id="__inline_index">
                                            
                                        </table>
                                    </div>
                                    <div>
                                        <button type="submit" onclick="getYarn()" class="btn btn-success btn-sm">Save</button>
                                    </div>
                                    </form>
                                    
                                </div>
                            </div>
                        </div>
                        <!-- YARN COST  -->
                        <div class="card">
                            <div class="card-header" id="headingTwo">
                                <h5 class="mb-0">
                                <button class="btn btn-link collapsed text-dark font-weight-bold" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    + Yarn Cost
                                </button><span class="text-danger font-weight-bold" style="margin-left: 50%;">Approved</span>
                                </h5>
                            </div>
                            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                                <div class="card-body">
                                    <form method="post" action="{% url 'pre_costing' %}" enctype="multipart/form-data" id="yc_form">
                                        {% csrf_token %}
                                        <input hidden name="_task" value="y_form">
                                        <div class="table-responsive" style="overflow: hidden; outline: none;" tabindex="0" >
                                            <table class="table table-bordered table-hover table-sm table-responsive-sm add_yarncost" >
                                                    <thead class="bg-info">
                                                        <tr>
                                                            <th class="text-center label"> Count </th>
                                                            <th class="text-center label" >Comp1</th>
                                                            <th class="text-center" > %</th>
                                                            <th class="text-center" > Color</th>
                                                            <th class="text-center" > Type </th>
                                                            <th class="text-center" > Cons Qnty </th>
                                                            <th class="text-center" > Supplier </th>
                                                            <th class="text-center" > Rate </th>
                                                            <th class="text-center" > Amount</th>
                                                            <th class="text-center"  width="80px;">Action </th>
                                                        </tr>
                                                    </thead>
                                                    {{ form_items_yc.management_form }}
                                                    <tbody class="inline_yarn_form ">
                                                        {% for yc in form_items_yc %}
                                                        <tr>
                                                            <td >
                                                                {{ yc.count|attr:"class:form-control"}}
                                                            </td>
                                                            <td >
                                                                {{ yc.comp_one|attr:"class:form-control"}}
                                                            </td>
                                                            <td >
                                                                {{ yc.pct|attr:"class:form-control"}}
                                                            </td>
                                                            <td >
                                                                {{ yc.color|attr:"class:form-control"}}
                                                            </td>
                                                            <td >
                                                                {{ yc.type|attr:"class:form-control"}}
                                                            </td>
                                                            <td >
                                                                {{ yc.cons_qty|attr:"class:form-control"}}
                                                            </td>
                                                            <td >
                                                                {{ yc.supplier|attr:"class:form-control"}}
                                                            </td>
                                                            <td >
                                                                {{ yc.rate|attr:"class:form-control"}}
                                                            </td>
                                                            <td >
                                                                {{ yc.amount|attr:"class:form-control"}}
                                                            </td>
                                                            <td class="removeyc text-center">
                                                            </td>
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                    <tfoot class="font-weight-bold">
                                                        <tr>
                                                            <td colspan="5" class="text-right">
                                                                SUM:
                                                            </td>
                                                            <td>  
                                                                {{ yarn_form.tt_cons_qty|attr:"class:form-control"}}
                                                            </td>
                                                            <td>  
                                                            </td>
                                                            <td>  
                                                            </td>
                                                            <td>  
                                                                {{ yarn_form.tt_amount|attr:"class:form-control"}}
                                                            </td>
                                                        </tr>
                                                    </tfoot>
                                            </table>
                                          
                                        </div>
                                        <div>
                                            <button type="submit" class="btn btn-success btn-sm">Save</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- CONVERSION COST  -->
                        <div class="card">
                            <div class="card-header" id="headingThree">
                                <h5 class="mb-0">
                                <button class="btn btn-link collapsed text-dark font-weight-bold" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    + Conversion Cost
                                </button><span class="text-danger font-weight-bold" style="margin-left: 50%;">Approved</span>
                                </h5>
                            </div>
                            <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                                <div class="card-body">
                                    <form method="post" action="{% url 'pre_costing' %}" enctype="multipart/form-data" id="cc_form">
                                        {% csrf_token %}
                                        <input hidden name="_task" value="con_form">
                                    <div class="table-responsive" >
                                        <table class="table table-bordered table-hover table-sm table-responsive-sm add_concost" >
                                            <thead class="bg-info">
                                                
                                                <tr>
                                                    <th class="text-center"> Fabric Description </th>
                                                    <th class="text-center" >Process</th>
                                                    <th class="text-center" > Process Loss</th>
                                                    <th class="text-center" > Req. Qty</th>
                                                    <th class="text-center" > Avg. Req. Qty(Less Process Loss) </th>
                                                    <th class="text-center" > Charge/Unit </th>
                                                    <th class="text-center" > Amount </th>
                                                    <th class="text-center" > Status </th>
                                                    <th class="text-center"  width="80px;">Action </th>
                                                    
                                                </tr>
                                            </thead>
                                            {{ form_items_cc.management_form }}
                                            <tbody class="inline_con_form">
                                                {% for con in form_items_cc %}
                                                <tr >
                                                    <td >
                                                        {{ con.fab_desc|attr:"class:form-control"}}
                                                    </td>
                                                    <td >
                                                        {{ con.process|attr:"class:form-control"|attr:"onchange:conProcess(id)"}}
                                                    </td>
                                                    <td >
                                                        {{ con.process_loss|attr:"class:form-control"|attr:"type:number"}}
                                                    </td>
                                                    <td >
                                                        {{ con.reg_qty|attr:"class:form-control"|attr:"type:number"}}
                                                    </td>
                                                    <td >
                                                        {{ con.avg_reg_qty|attr:"class:form-control"|attr:"type:number"}}
                                                    </td>
                                                    <td >
                                                        {{ con.charge_unit|attr:"class:form-control"|attr:"type:number"|attr:"onclick:passID(id)"}}
                                                    </td>
                                                    <td >
                                                        {{ con.amount|attr:"class:form-control"|attr:"type:number"}}
                                                    </td>
                                                    <td >
                                                        {{ con.status|attr:"class:form-control"}}
                                                    </td>
                                                    
                                                    <td class="removecc text-center">
                                                    </td>
                                                
                                                </tr>
                                                {% endfor %}
                                                
                                            </tbody>
                                            <tfoot class="font-weight-bold">
                                                <tr>
                                                    <td colspan="3" class="text-right">
                                                    SUM:
                                                    </td>
                                                    
                                                    <td colspan=""  >  
                                                        {{ con_form.tt_reg_qty|attr:"class:form-control"|attr:"type:number"}}
                                                    </td>
                                                    <td colspan=""  >  
                                                        {{ con_form.tt_avg_reg_qty|attr:"class:form-control"|attr:"type:number"}}
                                                    </td>
                                                
                                                    <td colspan=""  >  
                                                        {{ con_form.tt_charge_unit|attr:"class:form-control"|attr:"type:number"}}
                                                    </td>
                                                    <td colspan=""  >  
                                                        {{ con_form.tt_amount|attr:"class:form-control"|attr:"type:number"}}
                                                    </td>
                                                
                                                </tr>
                                                
                                            </tfoot>
                                            
                                        </table>
                                    </div>
                                    
                                    <div>
                                        <button type="submit" class="btn btn-success btn-sm">Save</button>
                                        
                                    </div>
                                    
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
               <!-- TRIM COST  -->
               <div class="container-fluid" id="trimHide">
                <div id="accordion">
                    <div class="card inpSize">
                    <div class="card-header" id="trimCollapse">
                        <h5 class="mb-0">
                        <button class="btn btn-link text-dark font-weight-bold" data-toggle="collapse" data-target="#collapseTrim" aria-expanded="true" aria-controls="collapseTrim">
                            + Trim Cost
                        </button><span class="text-danger font-weight-bold" style="margin-left: 50%;">Approved</span>
                        </h5>
                    </div>
                
                    <div id="collapseTrim" class="collapse show" aria-labelledby="trimCollapse" data-parent="#accordion">
                        <div class="card-body">
                            <form method="post" action="{% url 'pre_costing' %}" enctype="multipart/form-data" id="tc_form">
                                {% csrf_token %}
                                <input hidden name="_task" value="trim_form">
                            <div class="table-responsive" >
                                <table class="table table-bordered table-hover table-sm table-responsive add_trim"  >
                                    <thead class="bg-info">
                                        <tr>
                                            <th class="text-center " >Group</th>
                                            <th class="text-center" > Country</th>
                                            <th class="text-center" > Description</th>
                                            <th class="text-center" > Brand/Sup Ref </th>
                                            <th class="text-center" > Remarks </th>
                                            <th class="text-center" > Source </th>
                                            <th class="text-center" > Nominated Supp</th>
                                            <th class="text-center" > Cons UOM </th>
                                            <th class="text-center" > Cons/Unit Gmts</th>
                                            <th class="text-center" > Rate</th>
                                            <th class="text-center" > Amount</th>
                                            <th class="text-center" > Total Qty</th>
                                            <th class="text-center" > Total Amount</th>
                                            <th class="text-center" > Apvt </th>
                                            <th class="text-center" > Image</th>
                                            <th class="text-center" width="90px" > </th>
                                        </tr>
                                    </thead>

                                    {{ trim_form_item.management_form }}
                                    <tbody class="inline_trim_form">
                                        {% for tc in trim_form_item %}
                                        <tr >
                                            
                                            <td >
                                                {{ tc.group|attr:"class:form-control"|attr:"placeholder:Browse"|attr:"data-target:#trimGroup"|attr:"data-toggle:modal"|attr:"onclick:passID(id)" }}
                                            </td>
                                            <td >
                                                {{ tc.country|attr:"class:form-control"|attr:"placeholder:Browse"|attr:"data-target:#trimCountry"|attr:"data-toggle:modal"|attr:"onclick:passID(id)" }}
            
                                            </td>
                                            <td >
                                                {{ tc.description|attr:"class:form-control" }}
                                            </td>
                                            <td >
                                                {{ tc.brand_sup_ref|attr:"class:form-control" }}
                                            </td>
                                            <td >
                                                {{ tc.remarks|attr:"class:form-control" }}
                                            </td>
                                            <td >
                                                {{ tc.source|attr:"class:form-control" }}
                                            </td>
                                            
                                            <td >
                                                {{ tc.nominated_supp|attr:"class:form-control"|attr:"placeholder:Browse"|attr:"data-target:#trimSupplier"|attr:"data-toggle:modal"|attr:"onclick:passID(id)" }}
                                            </td>
                                            
                                            <td >
                                                {{ tc.cons_uom|attr:"class:form-control"|attr:"onclick:passID(id)"}}
                                            </td>
                                            <td >
                                                {{ tc.cons_unit_gmts|attr:"class:form-control"|attr:"type:number"|attr:"data-target:#careLabelInline"|attr:"data-toggle:modal" }}
            
                                            </td>
                                            <td >
                                                {{ tc.rate|attr:"class:form-control"|attr:"type:number" }}
            
                                            </td>
                                            <td >
                                                {{ tc.amount|attr:"class:form-control"|attr:"type:number" }}
                                            </td>
                                            <td >
                                                {{ tc.tt_qty|attr:"class:form-control"|attr:"type:number" }}
                                            </td>
                                            <td >
                                                {{ tc.tt_amt|attr:"class:form-control"|attr:"type:number" }}
                                            </td>
                                        
                                            <td >
                                                {{ tc.apvt_req|attr:"class:form-control" }}
                                            </td>
                                            <td >
                                                {{ tc.image|attr:"class:form-control" }}
                                            </td>
                                            <td class="removetc text-center">
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                    
                                    <tfoot class="font-weight-bold">
                                        <tr>
                                            <td colspan="8" class="text-right">
                                            SUM:
                                            </td>
                                            
                                            <td >  
                                                {{ trim_form.tt_cons_unit|attr:"class:form-control"|attr:"type:number" }}
                                            </td>
                                            <td >  
                                                {{ trim_form.tt_rate|attr:"class:form-control"|attr:"type:number" }}
                                            </td>
                                        
                                            <td>  
                                                {{ trim_form.tt_sub_amount|attr:"class:form-control"|attr:"type:number" }}
                                            </td>
                                            <td>  
                                                {{ trim_form.tt_grand_quantity|attr:"class:form-control"|attr:"type:number" }}
                                            </td>
                                            <td >  
                                                {{ trim_form.tt_grand_amount|attr:"class:form-control"|attr:"type:number" }}
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                            <div>
                                <button type="submit" class="btn btn-success btn-sm">Save</button>
                                
                            </div>
                        </form>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
                <!-- EMBLLISHMENT COST  -->
                <div class="container-fluid" id="embllishHide">
                    <div id="accordion">
                        <div class="card">
                        <div class="card-header" id="EmbCollapse">
                            <h5 class="mb-0">
                            <button class="btn btn-link text-dark font-weight-bold" data-toggle="collapse" data-target="#collapseEmb" aria-expanded="true" aria-controls="collapseEmb">
                                + Embellishment Cost
                            </button><span class="text-danger font-weight-bold" style="margin-left: 50%;">Approved</span>
                            </h5>
                        </div>
                    
                        <div id="collapseEmb" class="collapse show" aria-labelledby="EmbCollapse" data-parent="#accordion">
                            <div class="card-body">
                                <div class="table-responsive" >
                                    <table class="table table-bordered table-hover table-sm table-responsive-sm" >
                                        <thead class="bg-info">
                                            <tr>
                                                <th class="text-center"> Name </th>
                                                <th class="text-center " >Type</th>
                                                <th class="text-center" > Body Part</th>
                                                <th class="text-center" > Country</th>
                                                <th class="text-center" > Emb. Supplier </th>
                                                <th class="text-center" > Cons/1 Dzn Gmts </th>
                                                <th class="text-center" > Rate</th>
                                                <th class="text-center" > Amount</th>
                                                <th class="text-center" > Status</th>
                                                <th class="text-center" width="90px" > </th>
                                            </tr>
                                        </thead>
                                        <tbody >
                                            <tr >
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Printing</option>
                                                        <option>Others</option>
                                                    </select>
                                                </td>
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Dzn</option>
                                                        <option>Pcs</option>
                                                    </select>
                                                </td>
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Dzn</option>
                                                        <option>Pcs</option>
                                                    </select>
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control" placeholder="Browse" data-toggle="modal" data-target="#country">
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control" placeholder="Write">
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control">
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control" >
                
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control" >
                
                                                </td>
                                                
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Active</option>
                                                        <option>Inactive</option>
                                                    </select>
                                                </td>
                                                <td><button type="button" class="btn btn-sm btn-success"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                    <a  type="button" class="btn btn-sm btn-danger ml-1"><i class="fa fa-times" aria-hidden="true"></i></a>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot class="font-weight-bold">
                                            <tr>
                                                <td colspan="6" class="text-right">
                                                SUM:
                                                </td>
                                                <td colspan=""  >  
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                                <td colspan=""  >  
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>

                                </div>
                                <div>
                                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                                    <button type="submit" class="btn btn-info btn-sm">Update</button>
                                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    <button type="submit" class="btn btn-warning btn-sm">Refresh</button>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                <!-- WASH COST  -->
                <div class="container-fluid" id="washHide">
                    <div id="accordion">
                        <div class="card">
                        <div class="card-header" id="washCollapse">
                            <h5 class="mb-0">
                            <button class="btn btn-link text-dark font-weight-bold" data-toggle="collapse" data-target="#collapseWash" aria-expanded="true" aria-controls="collapseWash">
                                + Wash Cost
                            </button><span class="text-danger font-weight-bold" style="margin-left: 50%;">Approved</span>
                            </h5>
                        </div>
                        <div id="collapseWash" class="collapse show" aria-labelledby="washCollapse" data-parent="#accordion">
                            <div class="card-body">
                                <div class="table-responsive" >
                                    <table class="table table-bordered table-hover table-sm table-responsive-sm" >
                                        <thead class="bg-info">
                                            <tr>
                                                <th class="text-center"> Name </th>
                                                <th class="text-center " >Type</th>
                                                <th class="text-center" > Country</th>
                                                <th class="text-center" > Cons/1 Dzn Gmts </th>
                                                <th class="text-center" > Rate</th>
                                                <th class="text-center" > Amount</th>
                                                <th class="text-center" > Status</th>
                                                <th class="text-center" width="90px" > </th>
                                            </tr>
                                        </thead>
                                        <tbody >
                                            <tr >
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Printing</option>
                                                        <option>Others</option>
                                                    </select>
                                                </td>
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Dzn</option>
                                                        <option>Pcs</option>
                                                    </select>
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control" placeholder="Browse">
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control" placeholder="Browse">
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control" >
                                                </td>
                                                <td >
                                                    <input type="text" class="form-control" >
                                                </td>
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Active</option>
                                                        <option>Inactive</option>
                                                    </select>
                                                </td>
                                                <td><button type="button" class="btn btn-sm btn-success"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                    <a  type="button" class="btn btn-sm btn-danger ml-1"><i class="fa fa-times" aria-hidden="true"></i></a>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot class="font-weight-bold">
                                            <tr>
                                                <td colspan="5" class="text-right">
                                                SUM:
                                                </td>
                                                <td colspan=""  >  
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                                <div>
                                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                                    <button type="submit" class="btn btn-info btn-sm">Update</button>
                                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    <button type="submit" class="btn btn-warning btn-sm">Refresh</button>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                <!-- COMMERCIAL COST  -->
                <div class="container-fluid" id="commercialHide">
                    <div id="accordion">
                        <div class="card">
                        <div class="card-header" id="commCollapse">
                            <h5 class="mb-0">
                            <button class="btn btn-link text-dark font-weight-bold" data-toggle="collapse" data-target="#collapseComm" aria-expanded="true" aria-controls="collapseComm">
                                + Commercial Cost
                            </button><span class="text-danger font-weight-bold" style="margin-left: 50%;">Approved</span>
                            </h5>
                        </div>
                        <div id="collapseComm" class="collapse show" aria-labelledby="commCollapse" data-parent="#accordion">
                            <div class="card-body">
                                <div class="table-responsive" >
                                    <table class="table table-bordered table-hover table-sm table-responsive-sm" >
                                        <thead class="bg-info">
                                            <tr>
                                                <th class="text-center"  width="180px"> Item </th>
                                                <th class="text-center " >Rate In %</th>
                                                <th class="text-center" > Amount</th>
                                                <th class="text-center" > Status</th>
                                                <th class="text-center" width="90px" > </th>
                                            </tr>
                                        </thead>
                                        <tbody >
                                            <tr >
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Printing</option>
                                                        <option>Others</option>
                                                    </select>
                                                </td>
                                                <td >
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                                <td >
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Active</option>
                                                        <option>Inactive</option>
                                                    </select>
                                                </td>
                                                <td><button type="button" class="btn btn-sm btn-success"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                    <a  type="button" class="btn btn-sm btn-danger ml-1"><i class="fa fa-times" aria-hidden="true"></i></a>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot class="font-weight-bold">
                                            <tr>
                                                <td colspan="1" class="text-right">
                                                SUM:
                                                </td>
                                                <td colspan=""  >  
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                                <td colspan=""  >  
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                                <div>
                                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                                    <button type="submit" class="btn btn-info btn-sm">Update</button>
                                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    <button type="submit" class="btn btn-warning btn-sm">Refresh</button>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                <!-- COMMISSION  -->
                <div class="container-fluid" id="commissionHide">
                    <div id="accordion">
                        <div class="card">
                        <div class="card-header" id="cmsnCollapse">
                            <h5 class="mb-0">
                            <button class="btn btn-link text-dark font-weight-bold" data-toggle="collapse" data-target="#collapseCmsn" aria-expanded="true" aria-controls="collapseCmsn">
                                + Commission
                            </button><span class="text-danger font-weight-bold" style="margin-left: 50%;">Approved</span>
                            </h5>
                        </div>
                        <div id="collapseCmsn" class="collapse show" aria-labelledby="cmsnCollapse" data-parent="#accordion">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover table-sm table-responsive-sm" >
                                        <thead class="bg-info">
                                            <tr>
                                                <th class="text-center"  width="180px"> Item </th>
                                                <th class="text-center " >Rate In %</th>
                                                <th class="text-center" > Amount</th>
                                                <th class="text-center" > Status</th>
                                                <th class="text-center" width="90px" > </th>
                                            </tr>
                                        </thead>
                                        <tbody >
                                            <tr >
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Printing</option>
                                                        <option>Others</option>
                                                    </select>
                                                </td>
                                                <td >
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                                <td >
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                                <td >
                                                    <select name="" class="form-control" >
                                                        <option value="" disabled selected>Select</option>
                                                        <option>Active</option>
                                                        <option>Inactive</option>
                                                    </select>
                                                </td>
                                                <td><button type="button" class="btn btn-sm btn-success"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                                    <a  type="button" class="btn btn-sm btn-danger ml-1"><i class="fa fa-times" aria-hidden="true"></i></a>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot class="font-weight-bold">
                                            <tr>
                                                <td colspan="1" class="text-right">
                                                SUM:
                                                </td>
                                                <td colspan=""  >  
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                                <td colspan=""  >  
                                                    <input type="number" class="form-control" value="0">
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                                <div>
                                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                                    <button type="submit" class="btn btn-info btn-sm">Update</button>
                                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    <button type="submit" class="btn btn-warning btn-sm">Refresh</button>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>

    <!--======================================================= 
     GREY CONSUMPTION MODA FORMS
    ========================================================-->
    <!-- Embellishment Modal Country Modal inside Embellishment-->
    <div class="modal fade" id="country" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                ...
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
            </div>
    </div>
    <!-- BODY PART TABLE FOR SELECTING BODY PART AND BODY PART TYPE  -->
    <div class="modal fade " id="body_part" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="container table-responsive">
                <div class="modal-content ">
                    <div class="modal-header">
                    <h6 class="modal-title" id="exampleModalLabel">Body Part Description</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                        
                    <div class="modal-body ">
                        <table id="bp_reports" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                            <thead class="text-center bg-meroon">
                                <tr>
                                    <th >S/L No.</th>
                                    <th width="500">Body Part Group </th>
                                    <th>Type</th>
                                    <th >Action</th>
                                </tr>
                            </thead>
                            <tfoot id="tfooter">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                            <tbody class="text-center">
                                {% for i in body_parts %}
                                <tr id="bodytd-{{forloop.counter}}">
                                    <td>{{forloop.counter}}</td>
                                    <td>{{i.body_part_name}}</td>
                                    <td>{{i.bp_Type}}</td>

                                    <td><button id="bp-{{forloop.counter}}" class="btn btn-sm btn-outline-success " onclick="bodyPart(id)"  data-dismiss="modal"><i class="fa fa-check"></i></button> </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- FABRIC DESCRIPTION TABLE FOR SELECTING FABRIC CONSUMPTION  -->
    <div class="modal fade " id="fabricDesc" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg  " role="document">

            <div class="container">
                <div class="modal-content  ">
                    <div class="modal-header">
                    <h6 class="modal-title" id="exampleModalLabel">Fabric Description</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body ">
                    
                        <table id="fabric_desc_report" class="table table-bordered table-striped  table-sm table-responsive-sm table-hover  display" >
                            <thead class="text-center bg-meroon">
                                <tr>
                                    <th >S/L No.</th>
                                    <th>Fabric Nature </th>
                                    <th>Construction</th>
                                    <th>GSM/Weight</th>
                                    <th >Color</th>
                                    <th >Stich Length</th>
                                    <th >Process Loss</th>
                                    <th width="400">Fabric Composition</th>
                                    <th >Action</th>
                                </tr>
                            </thead>
                            <tfoot id="tfooter">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th width="300"></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                            <tbody class="text-center">
                                {% for i in fab_desc %}
                                <tr id="td-{{forloop.counter}}">
                                    <td>{{forloop.counter}}</td>
                                    <td>{{i.fab_nature}}</td>
                                    <td>{{i.construction}}</td>
                                    <td>{{i.gsm_weight}}</td>
                                    <td>{{i.color_range}}</td>
                                    <td>{{i.stich_length}}</td>
                                    <td>{{i.process_loss}}</td>
                                    <td>
                                        {% if i.yarn_one_pct and i.yarn_one %}
                                        {{i.yarn_one_pct}} {{i.yarn_one}}
                                        {% endif %}
                                        {% if i.yarn_two_pct and i.yarn_two %}
                                        {{i.yarn_two_pct}} {{i.yarn_two}}
                                        {% endif %}
                                        ( 
                                        {% if i.yarn_count_one and i.yarn_type_one %}
                                        {{i.yarn_count_one}} {{i.yarn_type_one}} 
                                        {% endif %}
                                        {% if i.yarn_count_two and  i.yarn_type_two %}
                                        + {{i.yarn_count_two}} {{i.yarn_type_two}} 
                                        {% endif %}
                                        )
                                    </td>
                                    <td><button id="btn-{{forloop.counter}}" class="btn btn-sm btn-outline-success " onclick="fabricationDes(id)" data-dismiss="modal"><i class="fa fa-check "></i></button> </td>
                                </tr>
                                {% endfor %}
                                
                            </tbody>
                            
                        </table>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- AVERAGE GREY CONSUMPTION INLINES TABLE   -->
    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"  id="colorSizeInline" >
        <div class="modal-dialog modal-lg  " >
            <div class="container-fluid">
                
                    <div class="modal-content  ">
                        <div class="modal-header">
                        <h6 class="modal-title" id="exampleModalLabel">Color & Size: Average Grey Consumption</h6>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        </div>
                        <div class="modal-body">
                            <div class="row bd-highlight mb-1 mt-1">
                                <div class="col-md-3"></div>
                                <div class="col-md-6">
                                    <table id="contrastColorTable" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                                        <tbody class="text-center">
                                            <tr>
                                                <td><input type="checkbox" name="copy" id="copyCheck"> <strong>Copy:</td>
                                                <td><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" > Color </td>
                                                <td> <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios4" value="option2" > Size</td>
                                                <td> <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option3" > Size & Color</td>
                                                <td> <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="option4" > PO</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-3"></div>
                            </div>
                            <form method="POST" id="greyForm" action="{% url 'pre_costing' %}">
                                {% csrf_token %}
                                <input type="hidden" name="_task" value="grey_data">
                                <table id="" class="table table-bordered table-striped table-responsive  table-sm table-responsive-sm table-hover  table-info  display" >
                                    <thead class="text-center bg-info">
                                        <tr>
                                            <th>S/L</th>
                                            <th>PO NO.</th>
                                            <th>Color</th>
                                            <th>Gmts Sizes</th>
                                            <th>Qty.</th>
                                            <th>Dia</th>
                                            <th>Item Sizes</th>
                                            <th>Finish Cons (kg)</th>
                                            <th>Process Loss %</th>
                                            <th>Grey Cons (kg)</th>
                                            <th>Rate</th>
                                            <th>Amount</th>
                                            <th>Pcs</th>
                                            <th>Total Qty</th>
                                            <th>Total Amount</th>
                                            <th>Remarks</th>
                                        </tr>
                                    </thead>
                                    <tbody id="base_body" class="text-center">
                                        {% for i in color %}
                                        <tr class="base_tr">
                                            <td>{{ forloop.counter }}</td>                         
                                            <td><input type="text" class="form-control" value="{{ i.po }}" readonly></td>                         
                                            <td><input type="text" class="form-control" id="id_color_{{ forloop.counter }}" value="{{ i.color }}" readonly></td>                         
                                            <td><input type="text" class="form-control" value="{{ i.size  }}" readonly></td>
                                            <td><input type="text" class="form-control" id="id_qty_{{ forloop.counter }}" value="{{ i.order_qty }}" oninput="totalQty(id)" readonly></td>             
                                            <td><input type="text" id="id_dia_{{ forloop.counter }}"  name="dia_{{ forloop.counter }}" class="form-control"></td>
                                            <td><input type="text" id="id_item_{{ forloop.counter }}" name="item_{{ forloop.counter }}" class="form-control"></td>
                                            <td><input type="text" id="id_fin_cons_{{ forloop.counter }}" name="fin_cons_{{ forloop.counter }}" class="form-control"  value="0" oninput="GreyCons(id)"></td>
                                            <td><input type="text" id="id_pro_{{ forloop.counter }}"  name="pro_{{ forloop.counter }}" class="form-control"  value="0" onchange="GreyCons(id)"></td>
                                            <td><input type="text" id="id_unit_{{ forloop.counter }}" name="unit_{{ forloop.counter }}" class="form-control" value="0" readonly></td>
                                            <td><input type="text" id="id_rate_{{ forloop.counter }}" name="rate_{{ forloop.counter }}" class="form-control"  value="0" onchange="totalAmt(id)" ></td>
                                            <td><input type="text" id="id_amt_{{ forloop.counter }}"  name="amt_{{ forloop.counter }}" class="form-control"  value="0" readonly></td>
                                            <td><input type="text" id="id_pcs_{{ forloop.counter }}"  name="pcs_{{ forloop.counter }}" class="form-control" value="{{pcs}}" onchange="totalPcs(id)" readonly></td>
                                            <td><input type="text" id="id_tt_qty_{{ forloop.counter }}" name="tt_qty_{{ forloop.counter }}" class="form-control"  value="0" readonly></td>
                                            <td><input type="text" id="id_tt_amt_{{ forloop.counter }}" name="tt_amt_{{ forloop.counter }}" class="form-control"  value="0" readonly></td>
                                            <td><input type="text" id="id_remarks_{{ forloop.counter }}" name="remarks_{{ forloop.counter }}" class="form-control" value="No Remarks"></td>
                                            <input type="hidden" name="id_{{ forloop.counter }}" value="{{ i.id }}">
                                        </tr>
                                        {% endfor %}
                                        <input type="hidden" name="__po_job" value="{{ fetch.job_no }}">
                                    </tbody>
                                    <tfoot class="font-weight-bold">
                                            <tr>
                                                <td colspan="4" class="text-right">
                                                Total:
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" id="qtys" value={{ total_po }} step="any" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control"  step="any" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control"  step="any" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" id="ttFinish" name="h" step="any" readonly>
                                                </td>
                                                <td> 
                                                    <input type="text" class="form-control" id="ttProcess" readonly> 
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="totalGreyCons" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="ttRate" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="ttAmt" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="ttorderQT" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="ttQty" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="masTtAmt" readonly>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="7" class="text-right">
                                                Average:
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="avgFinish" readonly>
                                                </td>
                                                <td> 
                                                    <input type="text" class="form-control" id="avgProcess" readonly> 
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="avgGreyCons" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="avgRate" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="avgAmt" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="avgorderQT" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="avgQty" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" id="avgmasTtAmt" readonly>
                                                </td>
                                            </tr>
                                    </tfoot>

                                </table>
                                <div class="modal-footer justify-content-center">
                                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
            </div>
        </div>
    </div>
    <div id="copy_inline_div"></div>
    <!-- CONTRAST COLOR FORM  MODAL  -->
    <div class="modal fade" id="contrastColorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog " role="document">
            <div class="container">
                <div class="modal-content">
                    <div class="modal-header">
                    <h6 class="modal-title" id="exampleModalLabel">Color Contrast</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body ">
                        <form method="POST" id="contForm" action="{% url 'pre_costing' %}">
                            {% csrf_token %}
                            <input type="hidden" name="_task" value="cont_color">
                            <table id="contrastColorTable" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                                <thead class="text-center bg-meroon">
                                    <tr>
                                        <th>SL.</th>
                                        <th>Gmts Color</th>
                                        <th>Contrast Color </th>
                                    </tr>
                                </thead>
                                <tbody id="base_body" class="text-center">
                                    {% for i in gmts_color %}
                                    <tr id="base_tr">
                                        <td>{{ forloop.counter }}</td>                         
                                        <td><input type="text" id="id_gmts_color_{{ forloop.counter }}"  name="gmts_color_{{ forloop.counter }}" class="form-control c" value="{{i}}"></td>
                                        <td><input type="text" id="id_contrast_color_{{ forloop.counter }}"  name="contrast_color_{{ forloop.counter }}" class="form-control"></td>
                                        <input type="hidden" name="id_{{ forloop.counter }}" value="{{ i.id }}">
                                    </tr>
                                    {% endfor %}
                                    <input type="hidden" name="__po_job" value="{{ fetch.job_no }}">
                                
                                </tbody>
                            </table>
                            <div class="modal-footer justify-content-center">
                                <button type="submit" onclick="passColorCon()" class="btn btn-success btn-sm">Save</button>
                            </div>
                        </form>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
    <!-- GARMENTS ITEM  MODAL  -->
    <div class="modal fade" id="gmtsItem" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="container">
                <div class="modal-content  ">
                    <div class="modal-header">
                    <h6 class="modal-title" id="exampleModalLabel">Garments Items</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body ">
                        <table id="gmtsTable" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                            <thead class="text-center bg-meroon">
                                <tr>
                                    <th>S/L</th>
                                    <th>Gmts Items</th>
                                    <th>Action </th>
                                </tr>
                            </thead>
                            <tfoot id="tfooter">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                            <tbody class="text-center">
                                {% for i in gmts_item %}
                                <tr id="gmt-{{forloop.counter}}">
                                    <td>{{forloop.counter}}</td>
                                    <td>{{i}}</td>
                                    <td><button id="btn-{{forloop.counter}}" class="btn btn-sm btn-outline-success " onclick="gmtItem(id)" data-dismiss="modal"><i class="fa fa-check "></i></button> </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                            
                        </table>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- KNITTING ITEMS  MODAL  -->
    <div class="modal fade" id="knittingItem" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
        
            <div class="container">
                <div class="modal-content  ">
                    <div class="modal-header">
                    <h6 class="modal-title" id="exampleModalLabel">Knitting Items</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body ">
                        <table id="knittingTable" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                            <thead class="text-center bg-meroon">
                                <tr>
                                    <th>SL.</th>
                                    <th class=" text-center" width="">Company Name</th>
                                    <th class=" text-center" width="">Body Part</th>
                                    <th class=" text-center" width="">Construction & Compositio</th>
                                    <th class=" text-center" width="">Gsm</th>
                                    <th class=" text-center" width="">Yarn Description</th>
                                    <th class=" text-center" >Uom</th>
                                    <th class=" text-center" >In-House Rate</th>
                                    <th class=" text-center" >USD</th>
                                    <th class=" text-center" >Status</th>
                                    <th class=" text-center" >Action</th>
                                    
                                </tr>
                            </thead>
                            <tfoot id="tfooter">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                            <tbody class="text-center">
                                {% for i in knitting_item %}
                                <tr id="knit-{{forloop.counter}}">
                                    <td class="text-center">
                                        {{forloop.counter}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.company_name}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.body_part}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.const_and_comp}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.gsm}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.yarn_desc}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.uom}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.inhouse_rate}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.bdt_to_usd}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.status}}
                  
                                      </td>
                                    <td><button id="btn-{{forloop.counter}}" class="btn btn-sm btn-outline-success " onclick="knitItem(id)" data-dismiss="modal"><i class="fa fa-check "></i></button> </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                            
                        </table>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- DYEING FORM  MODAL  -->
    <div id="dyeingForm" class="modal hide fade " tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-focus-on="input:first">
        <div class="modal-dialog  modal-md " >
            <div class="container-fluid">
                
                    <div class="modal-content  ">
                        <div class="modal-header">
                        <h6 class="modal-title" id="exampleModalLabel">Color Pop Up</h6>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        </div>
                        <div class="modal-body">
                           
                            <form method="POST" id="DyeingForm" action="{% url 'pre_costing' %}" >
                                {% csrf_token %}
                                <input type="hidden" name="_task" value="dyeing_color">
                                <table id="" class="table table-bordered table-striped table-responsive  table-sm table-responsive-sm table-hover  table-info  display" >
                                    <thead class="text-center bg-info">
                                        <tr>
                                            <th>S/L</th>
                                            <th>Gmts Color</th>
                                            <th>Fabric Color</th>
                                            <th>Cons</th>
                                            <th>Charge/Unit</th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody id="base_body" class="text-center">
                                        {% for i in color %}
                                        <tr id="base_tr">
                                            <td>{{ forloop.counter }}</td>                         
                                            <td><input type="text" class="form-control" id="id_gmts_color_{{ forloop.counter }}"  name="gmts_color_{{ forloop.counter }}" value="{{i.color}}" readonly></td>                         
                                            <td><input type="text" class="form-control" id="id_fabric_color_{{ forloop.counter }}"  name="fabric_color_{{ forloop.counter }}" value="" ></td>                         
                                            <td><input type="number" class="form-control" id="id_cons_rate_{{ forloop.counter }}"  name="cons_rate_{{ forloop.counter }}" value="" readonly></td>
                                            <td><input type="number" class="form-control" id="id_charge_unit_{{ forloop.counter }}"  name="charge_unit_{{ forloop.counter }}" data-toggle="modal" href="#dyeingItem" onclick="dyeingItem(id)"></td>
                                            <input type="hidden" name="id_{{ forloop.counter }}" value="{{ i.id }}">
                                        </tr>
                                        {% endfor %}    
                                        <input type="hidden" name="__po_job" value="{{ fetch.job_no }}">
                                    </tbody>
                                    <tfoot class="font-weight-bold">
                                            <tr>
                                                <td colspan="3" class="text-right">
                                                Total:
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control">
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="3" class="text-right">
                                                Avg. Total:
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control">
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control">
                                                </td>
                                            </tr>
                                          
                                    </tfoot>

                                </table>
                                <div class="modal-footer justify-content-center">
                                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
            </div>
        </div>
        <!-- <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h3>Stack One</h3>
        </div>
        <div class="modal-body">
          <p>One fine body…</p>
          <p>One fine body…</p>
          <p>One fine body…</p>
          <input type="text" data-tabindex="1">
          <input type="text" data-tabindex="2">
          <button class="btn" data-toggle="modal" href="#stack2">Launch modal</button>
        </div>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal" class="btn">Close</button>
          <button type="button" class="btn btn-primary">Ok</button>
        </div> -->
    </div>
    <!-- DYEING ITEM  MODAL  -->
    <div id="dyeingItem" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-focus-on="input:first">
        <div class="modal-dialog modal-lg" role="document">
        
            <div class="container">
                <div class="modal-content  ">
                    <div class="modal-header">
                    <h6 class="modal-title" id="exampleModalLabel">Dyeing Items</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body ">
                        <table id="knittingTable" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                            <thead class="text-center bg-meroon">
                                <tr>
                                    <th>SL.</th>
                                    <th class=" text-center" width="">Company Name</th>
                                    <th class=" text-center" width="">Const. & Compo.</th>
                                    <th class=" text-center" width="">Process Type</th>
                                    <th class=" text-center" width="">Process Name</th>
                                    <th class=" text-center" width="">Color</th>
                                    <th class=" text-center" width="">Width/Dia Type</th>
                                    <th class=" text-center" >In-House Rate</th>
                                    <th class=" text-center" >USD</th>
                                    <th class=" text-center" >Uom</th>
                                    <th class=" text-center" >Rate Type</th>
                                    <th class=" text-center" >Status</th>
                                    <th class=" text-center" >Action</th>
                                    
                                </tr>
                            </thead>
                            <tfoot id="tfooter">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                            <tbody class="text-center">
                                {% for i in dyeing_item %}
                                <tr id="dyeing-{{forloop.counter}}">
                                    <td class="text-center">
                                        {{forloop.counter}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.company_name}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.const_and_comp}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.process_type}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.process_name}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.color}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.width_dia_type}}
                  
                                      </td>
                                      <td class="text-center">
                                        {{i.inhouse_rate}}
                  
                                      </td>
                                      <td class="text-center">
                                          {{i.bdt_to_usd}}
                    
                                        </td>
                                      <td class="text-center">
                                        {{i.uom}}
                  
                                      </td>
                                      
                                      <td class="text-center">
                                        {{i.rate_type}}
                  
                                      </td>
                                     
                                      <td class="text-center">
                                        {{i.status}}
                  
                                      </td>
                                      
                                    <td><button id="btn-{{forloop.counter}}" class="btn btn-sm btn-outline-success " onclick="dyeingItem(id)" data-dismiss="modal"><i class="fa fa-check "></i></button> </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                            
                        </table>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- CARE LEVEL INLINES TABLE   -->
    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"  id="careLabelInline" >
        <div class="modal-dialog modal-lg  " >
            <div class="container-fluid">
                    <div class="modal-content  ">
                        <div class="modal-header bg-info">
                        <!-- <h6 class="modal-title" id="exampleModalLabel getName">Care Label[Dzn](Dzn)</h6> -->
                        <h6 class="modal-title" id="exampleModalLabel "><span id="helloName"></span></h6>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        </div>
                        <div class="modal-body">
                            <!-- RADIO BUTTON SECTION FOR CALCULATION  -->
                            <div class="container-fluid mb-4">
                                <div class="row">
                                    <div class="col-md-2 col-sm-12">
                                        <div class="form-check">
                                            <input class="form-check-input showHideCalc" type="radio" name="labelGroup" id="dzn" value="dzn" >
                                            <label class="form-check-label font-weight-bold" for="exampleRadios2">
                                                Dzn
                                            </label>
                                          </div>
                                        <div class="form-check">
                                            <input class="form-check-input showHideCalc " type="radio" name="labelGroup" id="pcs" value="pcs" >
                                            <label class="form-check-label font-weight-bold" for="exampleRadios1">
                                                Pcs
                                            </label>
                                          </div>
                                         
                                          <div class="form-check">
                                            <input class="form-check-input showHideCalc" type="radio" name="labelGroup" id="cone" value="cone" >
                                            <label class="form-check-label font-weight-bold" for="exampleRadios2">
                                                Cone
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input showHideCalc" type="radio" name="labelGroup" id="reset" value="reset" >
                                            <label class="form-check-label font-weight-bold" for="exampleRadios2">
                                                Reset/None
                                            </label>
                                          </div>
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <div class="mt-1 dzn hideBox">
                                                <h6 class="text-center font-weight-bold "> Dzn Calculator: </h6>
                                                <div class="row">
                                                  <div class="col">
                                                    <input type="number" class="form-control"  style="border:1px solid grey" placeholder="Value 01">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control"  style="border:1px solid grey" placeholder="Value 02">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control" style="border:1px solid grey" placeholder="Value 03">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control" style="border:1px solid grey" placeholder="Result" readonly>
                                                  </div>
                                                </div>
                                        </div>
                                        <div class="mt-1 pcs hideBox">
                                            <h6 class="text-center font-weight-bold "> Piece Calculator: </h6>

                                                <div class="row">
                                                  <div class="col">
                                                    <input type="number" class="form-control"  style="border:1px solid grey" placeholder="Value 01">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control" style="border:1px solid grey" placeholder="Value 02">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control" style="border:1px solid grey" placeholder="Value 03">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control" style="border:1px solid grey" placeholder="Result" readonly>
                                                  </div>
                                                </div>
                                        </div>
                                        <div class="mt-1 cone hideBox">
                                            <h6 class="text-center font-weight-bold "> Cone Calculator: </h6>

                                                <div class="row">
                                                  <div class="col">
                                                    <input type="number" class="form-control"  style="border:1px solid grey" placeholder="Value 01">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control" style="border:1px solid grey" placeholder="Value 02">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control" style="border:1px solid grey" placeholder="Value 03">
                                                  </div>
                                                  <div class="col">
                                                    <input type="number" class="form-control" style="border:1px solid grey" placeholder="Result" readonly>
                                                  </div>
                                                </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2"></div>
                                </div>
                            </div>
                            <!-- COPY SECTION  -->
                            <div class="row bd-highlight mt-2">
                                <div class="col-md-2 col-sm-12 "></div>
                                <div class="col-md-8 col-sm-12 table-responsive">
                                    <table id="careLabelTable" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                                        <tbody class="text-center">
                                            <tr>
                                                <td><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" > <strong>No Copy</strong></td>
                                                <td><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option2" > <strong> Copy to All</strong></td>
                                                <td><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option3" ><strong>Copy Gmts Size Wise</strong>  </td>
                                                <td><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option4" > <strong>Copy Gmts Color Wise</strong> </td>
                                                <td><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option5" > <strong>Copy Gmts Item Wise</strong> </td>
                                                <td><input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option6" > <strong>Copy Gmts PO Wise </strong></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-2 col-sm-12 "></div>
                            </div>
                            <form method="POST" id="CLForm" action="{% url 'pre_costing' %}">
                                {% csrf_token %}
                                <input type="text" id="getName" hidden> 
                                <input type="hidden" name="_task" value="cl_data">
                                <table  class="table table-bordered table-striped table-responsive  table-sm table-responsive-sm table-hover  table-info  display" >
                                    <thead class="text-center bg-info">
                                        <tr>
                                            <th>S/L</th>
                                            <th>PO NO.</th>
                                            <th>Gmts Items</th>
                                            <th>Country</th>
                                            <th>Gmts Color</th>
                                            <th>Gmts Sizes</th>
                                            <th>Gmts qty</th>
                                            <th>Item Color</th>
                                            <th>Item Sizes</th>
                                            <th>Cons.</th>
                                            <th>Ex. %</th>
                                            <th>Total Cons.</th>
                                            <th>Rate</th>
                                            <th>Amount</th>
                                            <th>Total Qty</th>
                                            <th>Total Amount</th>
                                            <th>Placement</th>
                                            <th>Pcs</th>
                                        </tr>
                                    </thead>
                                    <tbody id="bodyCare" class="text-center">
                                        {% for i in color %}
                                        <tr id="Cl_tr">
                                            <td>{{forloop.counter}}</td>                         
                                            <td><input type="text" id="id_cl_po_{{ forloop.counter }}" name="po_no_{{ forloop.counter }}" class="form-control" value="{{i.po}}" readonly></td>                         
                                            <td><input type="text" class="form-control" id="id_cl_gmts_item_{{ forloop.counter }}" name="gmts_item_{{ forloop.counter }}" class="form-control" value="{{i.gmt_items}}"  readonly></td>                         
                                            <td><input type="text" class="form-control" id="id_cl_country_{{ forloop.counter }}" name="country_{{ forloop.counter }}" class="form-control" value="{{i.country}}" readonly></td>
                                            <td><input type="text" class="form-control" id="id_cl_color_{{ forloop.counter }}" name="color_{{ forloop.counter }}" class="form-control" value="{{i.color}}" readonly></td>             
                                            <td><input type="text" class="form-control" id="id_cl_gmts_size_{{ forloop.counter }}" name="gmts_size_{{ forloop.counter }}" class="form-control" value="{{i.size}}" readonly></td>  
                                            <td><input type="text" class="form-control" id="id_cl_order_qty_{{ forloop.counter }}" class="form-control" value="{{i.order_qty}}" oninput="totalQuantity(id)" readonly ></td>  
                                            <td><input type="text" class="form-control" id="id_cl_item_color_{{ forloop.counter }}" name="item_color_{{ forloop.counter }}"></td>
                                            <td><input type="text" class="form-control" id="id_cl_item_sizes_{{ forloop.counter }}" name="item_sizes_{{ forloop.counter }}"></td>

                                            <td><input type="number" class="form-control" id="id_cl_cons_{{ forloop.counter }}" name="cons_{{ forloop.counter }}" value="0" oninput="totalCons(id)"></td>
                                            <td><input type="number" class="form-control" id="id_cl_ex_pct_{{ forloop.counter }}" name="ex_pct_{{ forloop.counter }}"  value="0" oninput="totalCons(id)"></td>
                                            <td><input type="number" class="form-control" id="id_cl_tt_cons_{{ forloop.counter }}" name="tt_cons_{{ forloop.counter }}" readonly  value="0"></td>  
                                            
                                            <td><input type="number" class="form-control" id="id_cl_rate_{{ forloop.counter }}" name="rate_{{ forloop.counter }}"  value="0" oninput="totalAmount(id)"></td>

                                            <td><input type="number" class="form-control" id="id_cl_amount_{{ forloop.counter }}" name="amount_{{ forloop.counter }}" readonly value="0"></td>  

                                            <td><input type="number" class="form-control" id="id_cl_tt_qty_{{ forloop.counter }}" name="tt_qty_{{ forloop.counter }}" readonly  value="0"></td>  
                                           
                                            <td><input type="number" class="form-control" id="id_cl_tt_amount_{{ forloop.counter }}" name="tt_amount_{{ forloop.counter }}" readonly  value="0" ></td>  
                                            
                                            <td><input type="number" class="form-control" id="id_cl_placement_{{ forloop.counter }}" name="placement_{{ forloop.counter }}"  value="0" ></td>  
                                            
                                            <td><input type="number" class="form-control" id="id_cl_pcs_{{ forloop.counter }}" name="pcs_{{ forloop.counter }}" value={{pcs}} onchange="totalPieces(id)" readonly  ></td>  
                                            
                                            <input type="hidden" name="id_{{ forloop.counter }}" value="{{ i.id }}">
                                        </tr>
                                        {% endfor %}
                                        <input type="hidden" name="__po_job" value="{{ fetch.job_no }}">
                                    </tbody>
                                    <tfoot class="font-weight-bold">
                                            <tr>
                                                <td colspan="9" class="text-right">
                                                Total:
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="tt_cons" step="any" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="tt_ex_pct" step="any" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="grand_tt_cons" step="any" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="tt_rate" readonly>
                                                </td>
                                                <td> 
                                                    <input type="number" class="form-control" name="sub_tt_amount" readonly> 
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="tt_qty_dzn" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="grand_tt_amount" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="tt_pcs" readonly>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="9" class="text-right">
                                                Average:
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="avg_tt_cons" readonly>
                                                </td>
                                                <td> 
                                                    <input type="number" class="form-control" name="avg_ex_pct" readonly> 
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="avg_grand_tt_cons" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="avg_tt_rate" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="avg_sub_tt_amount" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="avg_tt_qty_dzn" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="avg_grand_tt_amount" readonly>
                                                </td>
                                                <td>  
                                                    <input type="text" class="form-control" readonly>
                                                </td>
                                                <td>  
                                                    <input type="number" class="form-control" name="avg_tt_pcs" readonly>
                                                </td>
                                            </tr>
                                    </tfoot>

                                </table>
                                <div class="modal-footer justify-content-center">
                                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                                </div>
                            </form>
                        </div>
                    </div>
            </div>
        </div>
    </div>
    <div id="copy_care_label"></div>

    <!-- COUNTRY  MODAL  -->
    <div class="modal fade" id="trimCountry" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="container">
                <div class="modal-content ">
                    <div class="modal-header ">
                    <h6 class="modal-title" id="exampleModalLabel">Country</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body ">
                        <table id="tr_Country_Table" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                            <thead class="text-center bg-meroon">
                                <tr>
                                    <th>S/L</th>
                                    <th>Country Name</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tfoot id="tfooter">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                            <tbody class="text-center">
                               {% for i in country %}
                                <tr id="country-{{forloop.counter}}">
                                    <td>{{forloop.counter}}</td>
                                    <td>{{i.country_name}}</td>
                                    <td><button id="btn-{{forloop.counter}}" class="btn btn-sm btn-outline-success " onclick="trimCountry(id)" data-dismiss="modal"><i class="fa fa-check "></i></button> </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                            
                        </table>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- NOMINATED SUPPLIER  MODAL  -->
    <div class="modal fade" id="trimSupplier" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="container">
                <div class="modal-content ">
                    <div class="modal-header ">
                    <h6 class="modal-title" id="exampleModalLabel">Nominated Supplier</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body ">
                        <table id="nomiSuppTable" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                            <thead class="text-center bg-meroon">
                                <tr>
                                    <th>S/L</th>
                                    <th>Nominated Supplier</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tfoot id="tfooter">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                            <tbody class="text-center">
                                {% for i in nom_supp %}
                                <tr id="nomiSupp-{{forloop.counter}}">
                                    <td>{{forloop.counter}}</td>
                                    <td>{{i.supplier_name}}</td>
                                    <td><button id="btn-{{forloop.counter}}" class="btn btn-sm btn-outline-success " onclick="trimNomiSupp(id)" data-dismiss="modal"><i class="fa fa-check "></i></button> </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                            
                        </table>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- TRIM GROUP MODAL  -->
    <div class="modal fade" id="trimGroup" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="container">
                <div class="modal-content ">
                    <div class="modal-header ">
                    <h6 class="modal-title" id="exampleModalLabel">Group</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body ">
                        <table id="trimGroupTable" class="table table-bordered table-striped table-sm table-responsive-sm table-hover  display" >
                            <thead class="text-center bg-meroon">
                                <tr>
                                    <th>S/L</th>
                                    <th>Group Name</th>
                                    <th>Cons. UOM</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tfoot id="tfooter">
                                <tr>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </tfoot>
                            <tbody class="text-center">
                               {% for i in groups %}
                                <tr id="group-{{forloop.counter}}">
                                    <td>{{forloop.counter}}</td>
                                    <td>{{i.group_item_name}}</td>
                                    <td>{{i.group_item_uom}}</td>
                                    <td><button id="btn-{{forloop.counter}}" class="btn btn-sm btn-outline-success " onclick="trimGroup(id)" data-dismiss="modal"><i class="fa fa-check "></i></button> </td>
                                </tr>
                               {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!---------------------------------- Modal End -------------------------------------->
{% endblock body %}

{% block script %}

<!-- FOR FABRIC COST INLINE  -->
<script type="text/javascript">
    $(function() {
        $('.inline_fabric_form').formset({
            prefix: '{{ form_items_fc.prefix }}',
            addText: '+ Add More',
            deleteText: 'X',
            addContainerClass:"add_fc",
            addCssClass:"btn btn-sm btn-warning mt-4 mb-3",
            deleteCssClass:"btn btn-sm btn-danger",
            deleteContainerClass:"removefc",
        });
    });
</script>
<!-- FOR YARN COST INLINE  -->
<script type="text/javascript">
    $(function() {
        $('.inline_yarn_form').formset({
            prefix: '{{ form_items_yc.prefix }}',
            addText: '+ Add More',
            deleteText: 'X',
            //addContainerClass:"add_yarncost",
            addCssClass:"btn btn-sm btn-warning mt-4 mb-3",
            deleteCssClass:"btn btn-sm btn-danger",
            deleteContainerClass:"removeyc",
        });
    });
</script>

<!-- FOR CONVERSION COST INLINE  -->
<script type="text/javascript">
    $(function() {
        $('.inline_con_form').formset({
            prefix: '{{ form_items_cc.prefix }}',
            addText: '+ Add More',
            deleteText: 'X',
            addContainerClass:"add_concost",
            addCssClass:"btn btn-sm btn-warning mt-4 mb-3",
            deleteCssClass:"btn btn-sm btn-danger",
            deleteContainerClass:"removecc",
        });
    });
</script>

<!-- FOR TRIM COST INLINE  -->
<script type="text/javascript">
    $(function() {
        $('.inline_trim_form').formset({
            prefix: '{{ trim_form_item.prefix }}',
            addText: '+ Add More',
            deleteText: 'X',
            addContainerClass:"add_trim",
            addCssClass:"btn btn-sm btn-warning mt-4 mb-3",
            deleteCssClass:"btn btn-sm btn-danger",
            deleteContainerClass:"removetc",
        });
    });
</script>
<!-- ALL INLINE FOR FABRIC COST  -->
<script>
    var working_id = 0
    var conWorkingId = 0
    var count = 1
    var modalCount = 0
    var wModal = []
    var fCout_g = 0
    var color_count = '{{ color_count }}'
    var conColorCount = '{{ con_color }}'
    var total_conv = {
        
        'ttFinish':'id_fin_cons_',
        'ttProcess': 'id_pro_',
        'totalGreyCons': 'id_unit_',
        'ttRate': 'id_rate_',
        'ttAmt': 'id_amt_',
        'ttorderQT': 'id_pcs_',
        'ttQty': 'id_tt_qty_',
        'masTtAmt': 'id_tt_amt_'
    }
    var avg_conv = {
        'avgFinish':'id_fin_cons_',
        'avgProcess': 'id_pro_',
        'avgRate': 'id_rate_',
        'avgAmt': 'id_amt_',
        'avgorderQT': 'id_pcs_',
        'avgQty': 'id_tt_qty_',
        'avgmasTtAmt': 'id_tt_amt_'
    }
    var total_Consump = {
         'gnd_tt_cons':'id_cl_tt_cons_',
     }
    var avg_Consump = {
        'avgCons':'id_cl_tt_cons_',
    }
   
    var totalQtyCount = 0
    for(var i = 0; i<color_count; i++){
        totalQtyCount += parseFloat(document.getElementById(`id_cl_order_qty_${i+1}`).value, 10)
    }
    var totalFinish = 0
    var averageFinishCons  = 0

    function update(){
        count++
        document.getElementById('__inline_index').value = count
    }

    function negUpdate(){
        count--
        document.getElementById('__inline_index').value = count
    }

    function passColor(id){
        document.getElementById('__inline_index').value = count
        var a = document.getElementById('colorSizeInline')
        if(rightID(id) != 0){
            if(wModal.includes(rightID(id)) == false){
                document.getElementById('copy_inline_div').append(a.cloneNode(true))
                document.getElementById("greyForm").reset()
                document.getElementById('copy_inline_div').lastChild.id = `colorSizeInline${modalCount}`
                document.getElementById('id_fabric_inline-V-avg_grey_cons'.replaceAt(17, rightID(id)-1)).dataset.target = `#colorSizeInline${modalCount}`
                document.getElementById("copy_inline_div").lastChild.childNodes[1].childNodes[1].childNodes[1].id = ''
                wModal.push(rightID(id))
                modalCount++
            }
        }
    }
   

    function passColorCon(){
        for(var i = 0; i<parseInt(conColorCount); i++){
            if('id_contrast_color_V'.replaceAt(18, i+1).value != ''){
                document.getElementById('id_fabric_inline-V-color'.replaceAt(17, conWorkingId)).value = document.getElementById('id_contrast_color_V'.replaceAt(18, i+1)).value
                break
            }
        }
    }

    function colorContrast(id){
        conWorkingId = rightID(id)
        if(document.getElementById(id).value == 2){
            document.getElementById("id_fabric_inline-V-color".replaceAt(17, rightID(id))).disabled = false
            $('#contrastColorModal').modal("show")
        }else if(document.getElementById(id).value == 1){
            document.getElementById("id_fabric_inline-V-color".replaceAt(17, rightID(id))).disabled = true
        }else{
            document.getElementById("id_fabric_inline-V-color".replaceAt(17, rightID(id))).disabled = false
        }
    }

    function rightID(id){
        var numPre = []
        var number = 0
        for(var i=0; i<id.length; i++){
            if(parseInt(id[i]) || id[i] == '0'){
                numPre.push(parseInt(id[i]))
            }
        }
        for(var i = 0; i<numPre.length; i++){
            number += numPre[i] * (10 ** (numPre.length - (i+1)))
        }
        return number
    }
    String.prototype.replaceAt = function(index, replacement) {
        return this.substr(0, index) + replacement + this.substr(index + 1, 28);
    }

    function GreyCons(id){
        document.getElementById(`id_unit_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_fin_cons_${rightID(id)}`).value, 10) / (1.00 - (parseFloat(document.getElementById(`id_pro_${rightID(id)}`).value, 10)) / 100)).toFixed(4)
        if(document.getElementById("exampleRadios1").checked = true){
            copy(document.getElementById(`id_color_${rightID(id)}`).value, 'color', id)
        }
        totalQty(id)
        total('ttFinish')
        total('ttProcess')
        total('totalGreyCons')
        avg('avgFinish')
        avg('avgProcess')
        pipeline()
    }

    function copy(target, type, id){
        if(type == 'color'){
            for(var i = 0; i<document.getElementsByClassName("base_tr").length; i++){
                if(document.getElementsByClassName("base_tr")[i].childNodes[5].childNodes[0].value == target){
                    document.getElementsByClassName("base_tr")[i].childNodes[15].childNodes[0].value = document.getElementById(id).value
                }
            }
        }
    }

    function totalQty(id){
        document.getElementById(`id_tt_qty_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_qty_${rightID(id)}`).value, 10) / parseFloat(document.getElementById(`id_pcs_${rightID(id)}`).value, 10) * parseFloat(document.getElementById(`id_unit_${rightID(id)}`).value, 10)).toFixed(2)
    }

    function totalAmt(id){
        document.getElementById(`id_tt_amt_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_rate_${rightID(id)}`).value, 10) * parseFloat(document.getElementById(`id_tt_qty_${rightID(id)}`).value, 10)).toFixed(2)
        greyCons(id)
        total('ttRate')
        avg('avgRate')
        pipeline()
    }

    function greyCons(id){
        document.getElementById(`id_amt_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_unit_${rightID(id)}`).value, 10) * parseFloat(document.getElementById(`id_rate_${rightID(id)}`).value, 10)).toFixed(2)
        total('ttAmt')
        total('ttQty')
        total('masTtAmt')
        avg('avgAmt')
        avg('avgQty')
        avg('avgmasTtAmt')
        avgGreyCons()
        pipeline()
    }

    function total(type){
        var total = 0
        for(var i = 0; i<parseInt(color_count); i++){
            total += parseFloat(document.getElementById(`${total_conv[type]}${i+1}`).value, 10)
        }
        document.getElementById(type).value = total
    }

    function avg(type){
        var total = 0
        for(var i = 0; i<parseInt(color_count); i++){
            total += parseFloat(document.getElementById(`${avg_conv[type]}${i+1}`).value, 10)
        }
        document.getElementById(type).value = total / color_count
    }

    function avgGreyCons(){
        var total = 0
        for(var i = 0; i<parseInt(color_count); i++){
            total += parseFloat(document.getElementById(`masTtAmt`).value, 10)
        }
        document.getElementById("avgGreyCons").value = (total / totalQtyCount) * parseFloat(document.getElementById("id_pcs_1").value, 10)
    }

    function pipeline(){
        document.getElementById(`id_fabric_inline-V-avg_grey_cons`.replaceAt(17, working_id)).value = document.getElementById(`avgGreyCons`).value
        document.getElementById(`id_fabric_inline-V-rate`.replaceAt(17, working_id)).value = document.getElementById('avgRate').value
        document.getElementById(`id_fabric_inline-V-amount`.replaceAt(17, working_id)).value = document.getElementById('avgAmt').value
        document.getElementById(`id_fabric_inline-V-total_quantity`.replaceAt(17, working_id)).value = document.getElementById('avgQty').value
        document.getElementById(`id_fabric_inline-V-total_amount`.replaceAt(17, working_id)).value = document.getElementById('avgmasTtAmt').value
    }

    function passID(id){
        working_id = rightID(id)
    }

    function conProcess(id){
        conWorkingId = rightID(id)
        if(document.getElementById(id).value == 3){
            $('#knittingItem').modal("show")
        }else if(document.getElementById(id).value == 2){
            $('#dyeingForm').modal("show")
        }
  }

    //GARMENTS ITEM
    function gmtItem(id){
        document.getElementById('id_fabric_inline-V-gmts_items'.replaceAt(17, working_id)).value = document.getElementById(`gmt-${rightID(id)}`).children[1].innerText
    }
    // FABRIC DESC
    function fabricationDes(id){
        var construction = document.getElementById(`td-${rightID(id)}`).children[2].innerText
        var fabdescription = document.getElementById(`td-${rightID(id)}`).children[7].innerText
        var fabComp= construction + ' ' + ' ' + fabdescription;
        document.getElementById('id_fabric_inline-V-fabric_desc'.replaceAt(17, working_id)).value = fabComp
        document.getElementById('id_fabric_inline-V-gms'.replaceAt(17, working_id)).value = document.getElementById(`td-${rightID(id)}`).children[3].innerText
    }
    //BODY PART
    function bodyPart(id){
        document.getElementById('id_fabric_inline-V-body_part'.replaceAt(17, working_id)).value = document.getElementById(`bodytd-${rightID(id)}`).children[1].innerText
        document.getElementById('id_fabric_inline-V-body_part_type'.replaceAt(17, working_id)).value = document.getElementById(`bodytd-${rightID(id)}`).children[2].innerText
    }
    //CONVERSION COST KNITTING ITEM RATE 
    function knitItem(id){
        document.getElementById('id_conver_inline-V-charge_unit'.replaceAt(17, working_id)).value = document.getElementById(`knit-${rightID(id)}`).children[8].innerText
    }

    //CONVERSION COST DYEING ITEM RATE 
    function dyeingItem(id){ 
        document.getElementById(`id_charge_${rightID(id)}`).value = document.getElementById(`dyeing-${rightID(id)}`).children[8].innerText
    }

    // FABRIC COUNTER FOR YARN
    function febCount(){
        fCout = 0
        for(var i = 0; i<count; i++){
            if(document.getElementById('id_fabric_inline-V-fabric_desc'.replaceAt(17, i)).value.includes('+')){
                fCout += 2
            }else{
                fCout++
            }
        }
        fCout_g = fCout
    }
    // YARN COST
    function getYarn(){
        for(var i = 0; i<febCount(); i++){
            document.getElementsByClassName('btn btn-sm btn-warning mt-4 mb-3 mb-yarn')[0].click()
        }
    }

    // TRIM COST STARTS =========================================================================================================================================================
    function passtQt(id){
        document.getElementById('id_trim_items-V-tt_qty'.replaceAt(14, working_id)).value = document.getElementById('ttQtys').value
    }
    
    //CONVERSION COST KNITTING ITEM RATE 
    function knitItem(id){
        document.getElementById('id_conver_inline-V-charge_unit'.replaceAt(17, working_id)).value = document.getElementById(`knit-${rightID(id)}`).children[8].innerText
    }

    //CONVERSION COST DYEING ITEM RATE 
    function dyeingItem(id){ 
        document.getElementById(`id_charge_${rightID(id)}`).value = document.getElementById(`dyeing-${rightID(id)}`).children[8].innerText
    }

    // COUNTRY DATA FETCHING
    function trimCountry(id){
        document.getElementById('id_trim_items-V-country'.replaceAt(14, working_id)).value = document.getElementById(`country-${rightID(id)}`).children[1].innerText
    }
    
    // GROUP DATA FETCHING
    function trimGroup(id){
        document.getElementById('id_trim_items-V-group'.replaceAt(14, working_id)).value = document.getElementById(`group-${rightID(id)}`).children[1].innerText
        document.getElementById('id_trim_items-V-cons_uom'.replaceAt(14, working_id)).value = document.getElementById(`group-${rightID(id)}`).children[2].innerText
        var hello = document.getElementById('getName').value = document.getElementById(`group-${rightID(id)}`).children[1].innerText
        document.getElementById('helloName').innerText = document.getElementById(`group-${rightID(id)}`).children[1].innerText

    }
    
    // NOMINATED SUPPLIER FETCHING
    function trimNomiSupp(id){
        document.getElementById('id_trim_items-V-nominated_supp'.replaceAt(14, working_id)).value = document.getElementById(`nomiSupp-${rightID(id)}`).children[1].innerText
    }

    // CARE LABEL MODAL DATA CALCULATIONS 
    function totalCons(id){
       var clCons =  parseFloat(document.getElementById(`id_cl_cons_${rightID(id)}`).value, 10).toFixed(2);
       var clExPct = parseFloat(document.getElementById(`id_cl_ex_pct_${rightID(id)}`).value, 10).toFixed(2);
       var pctConvert = ( clExPct / 100 )
       var ttConsumption = (clCons / (1.00 - pctConvert)).toFixed(4)
       document.getElementById(`id_cl_tt_cons_${rightID(id)}`).value = ttConsumption;
       totalQuantity(id)
       totals('gnd_tt_cons')
    }

    function totalAmount(id){
        var clRate = parseFloat(document.getElementById(`id_cl_rate_${rightID(id)}`).value, 10).toFixed(2);
        let ttConsumptions = parseFloat(document.getElementById(`id_cl_tt_cons_${rightID(id)}`).value, 10);
        var ttAmount = ( ttConsumptions * clRate ); 
        document.getElementById(`id_cl_amount_${rightID(id)}`).value = ttAmount;
        totalCareLabAmount(id)
    }
    
    function totalQuantity(id){
        document.getElementById(`id_cl_tt_qty_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_cl_order_qty_${rightID(id)}`).value, 10) / parseFloat(document.getElementById(`id_cl_pcs_${rightID(id)}`).value, 10) * parseFloat(document.getElementById(`id_cl_tt_cons_${rightID(id)}`).value, 10)).toFixed(2)
        totalCareLabAmount(id)
    }
    
    function totalCareLabAmount(id){
        document.getElementById(`id_cl_tt_amount_${rightID(id)}`).value = parseFloat(document.getElementById(`id_cl_tt_qty_${rightID(id)}`).value, 10) * parseFloat(document.getElementById(`id_cl_rate_${rightID(id)}`).value, 10)
    }
    
    function totals(type){
        var totals = 0
        for(var i = 0; i<parseInt(color_count); i++){
            totals += parseFloat(document.getElementById(`${total_Consump[type]}${i+1}`).value, 10)
        }
        document.getElementById(type).value = totals
    }
    // CARE LABEL MODAL DATA CALCULATIONS 
  
    // click on the div FOR SHOWING HIDE DIV FOR COSTING
    function fabric(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        // for hiding
        fabric.el = el;
        // stop the event right here
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function trim(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function embllish(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function wash(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function commercial(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function commission(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
</script>
<!-- ALL INLINE FOR FABRIC COST  -->
<!-- <script>
    var working_id = 0
    var conWorkingId = 0
    var count = 1
    var modalCount = 0
    var wModal = []
    var fCout_g = 0
    var color_count = '{{ color_count }}'
    var conColorCount = '{{ con_color }}'
    var total_conv = {
        
        'ttFinish':'id_fin_cons_',
        'ttProcess': 'id_pro_',
        'totalGreyCons': 'id_unit_',
        'ttRate': 'id_rate_',
        'ttAmt': 'id_amt_',
        'ttorderQT': 'id_pcs_',
        'ttQty': 'id_tt_qty_',
        'masTtAmt': 'id_tt_amt_'
    }
    var avg_conv = {
        'avgFinish':'id_fin_cons_',
        'avgProcess': 'id_pro_',
        'avgGreyCons': 'id_unit_',
        'avgRate': 'id_rate_',
        'avgAmt': 'id_amt_',
        'avgorderQT': 'id_pcs_',
        'avgQty': 'id_tt_qty_',
        'avgmasTtAmt': 'id_tt_amt_'
    }
    var totalQtyCount = 0
    for(var i = 0; i<color_count; i++){
        totalQtyCount += parseFloat(document.getElementById(`id_qty_${i+1}`).value, 10)
    }

    function update(){
        count++
        document.getElementById('__inline_index').value = count
    }

    function negUpdate(){
        count--
        document.getElementById('__inline_index').value = count
    }

    function passColor(id){
        document.getElementById('__inline_index').value = count
        var a = document.getElementById('colorSizeInline')
        if(rightID(id) != 0){
            if(wModal.includes(rightID(id)) == false){
                document.getElementById('copy_inline_div').append(a.cloneNode(true))
                document.getElementById("greyForm").reset()
                document.getElementById('copy_inline_div').lastChild.id = `colorSizeInline${modalCount}`
                document.getElementById('id_fabric_inline-V-avg_grey_cons'.replaceAt(17, rightID(id)-1)).dataset.target = `#colorSizeInline${modalCount}`
                document.getElementById("copy_inline_div").lastChild.childNodes[1].childNodes[1].childNodes[1].id = ''
                wModal.push(rightID(id))
                modalCount++
            }
        }
    }

    function rightID(id){
        var numPre = []
        var number = 0
        for(var i=0; i<id.length; i++){
            if(parseInt(id[i]) || id[i] == '0'){
                numPre.push(parseInt(id[i]))
            }
        }
        for(var i = 0; i<numPre.length; i++){
            number += numPre[i] * (10 ** (numPre.length - (i+1)))
        }
        return number
    }
    String.prototype.replaceAt = function(index, replacement) {
        return this.substr(0, index) + replacement + this.substr(index + 1, 28);
    }

    // COPY PANEL GREY CONSUMPTIN 
    $(function(){
        $("#copyCheck").change(function() {
            if ($("#copyCheck:checked").length > 0) {
                bindGroups();
            } else {
                unbindGroups();
            }
        });
    });
    var bindGroups = function() {
        // First copy values
        // dia
        $("input[name='dia_2']").val($("input[name='dia_1']").val());
        $("input[name='dia_3']").val($("input[name='dia_1']").val());
        $("input[name='dia_4']").val($("input[name='dia_1']").val());
        $("input[name='dia_5']").val($("input[name='dia_1']").val());
        $("input[name='dia_6']").val($("input[name='dia_1']").val());
        $("input[name='dia_7']").val($("input[name='dia_1']").val());
        $("input[name='dia_8']").val($("input[name='dia_1']").val());
        $("input[name='dia_9']").val($("input[name='dia_1']").val());
        $("input[name='dia_10']").val($("input[name='dia_1']").val());
        $("input[name='dia_11']").val($("input[name='dia_1']").val());
        $("input[name='dia_12']").val($("input[name='dia_1']").val());
        $("input[name='dia_13']").val($("input[name='dia_1']").val());
        $("input[name='dia_14']").val($("input[name='dia_1']").val());
        $("input[name='dia_15']").val($("input[name='dia_1']").val());
        // Finish Cons
        $("input[name='fin_cons_2']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_3']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_4']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_5']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_6']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_7']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_8']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_9']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_10']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_11']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_12']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_13']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_14']").val($("input[name='fin_cons_1']").val());
        $("input[name='fin_cons_15']").val($("input[name='fin_cons_1']").val());
        // Process Loss
        $("input[name='pro_2']").val($("input[name='pro_1']").val());
        $("input[name='pro_3']").val($("input[name='pro_1']").val());
        $("input[name='pro_4']").val($("input[name='pro_1']").val());
        $("input[name='pro_5']").val($("input[name='pro_1']").val());
        $("input[name='pro_6']").val($("input[name='pro_1']").val());
        $("input[name='pro_7']").val($("input[name='pro_1']").val());
        $("input[name='pro_8']").val($("input[name='pro_1']").val());
        $("input[name='pro_9']").val($("input[name='pro_1']").val());
        $("input[name='pro_10']").val($("input[name='pro_1']").val());
        $("input[name='pro_11']").val($("input[name='pro_1']").val());
        $("input[name='pro_12']").val($("input[name='pro_1']").val());
        $("input[name='pro_13']").val($("input[name='pro_1']").val());
        $("input[name='pro_14']").val($("input[name='pro_1']").val());
        $("input[name='pro_15']").val($("input[name='pro_1']").val());
        // Rate
        $("input[name='rate_2']").val($("input[name='rate_1']").val());
        $("input[name='rate_3']").val($("input[name='rate_1']").val());
        $("input[name='rate_4']").val($("input[name='rate_1']").val());
        $("input[name='rate_5']").val($("input[name='rate_1']").val());
        $("input[name='rate_6']").val($("input[name='rate_1']").val());
        $("input[name='rate_7']").val($("input[name='rate_1']").val());
        $("input[name='rate_8']").val($("input[name='rate_1']").val());
        $("input[name='rate_9']").val($("input[name='rate_1']").val());
        $("input[name='rate_10']").val($("input[name='rate_1']").val());
        $("input[name='rate_11']").val($("input[name='rate_1']").val());
        $("input[name='rate_12']").val($("input[name='rate_1']").val());
        $("input[name='rate_13']").val($("input[name='rate_1']").val());
        $("input[name='rate_14']").val($("input[name='rate_1']").val());
        $("input[name='rate_15']").val($("input[name='rate_1']").val());


        // $("input[name='b2']").val($("input[name='a2']").val());
        // $("input[name='b3']").val($("input[name='a3']").val());
    
        // Then bind fields
        $("input[name='dia_1']").keyup(function() {
            $("input[name='dia_2']").val($(this).val());
            $("input[name='dia_3']").val($(this).val());
            $("input[name='dia_4']").val($(this).val());
            $("input[name='dia_5']").val($(this).val());
            $("input[name='dia_6']").val($(this).val());
            $("input[name='dia_7']").val($(this).val());
            $("input[name='dia_8']").val($(this).val());
            $("input[name='dia_9']").val($(this).val());
            $("input[name='dia_10']").val($(this).val());
            $("input[name='dia_11']").val($(this).val());
            $("input[name='dia_12']").val($(this).val());
            $("input[name='dia_13']").val($(this).val());
            $("input[name='dia_14']").val($(this).val());
            $("input[name='dia_15']").val($(this).val());
        });
        $("input[name='fin_cons_1']").keyup(function() {
            $("input[name='fin_cons_2']").val($(this).val());
            $("input[name='fin_cons_3']").val($(this).val());
            $("input[name='fin_cons_4']").val($(this).val());
            $("input[name='fin_cons_5']").val($(this).val());
            $("input[name='fin_cons_6']").val($(this).val());
            $("input[name='fin_cons_7']").val($(this).val());
            $("input[name='fin_cons_8']").val($(this).val());
            $("input[name='fin_cons_9']").val($(this).val());
            $("input[name='fin_cons_10']").val($(this).val());
            $("input[name='fin_cons_11']").val($(this).val());
            $("input[name='fin_cons_12']").val($(this).val());
            $("input[name='fin_cons_13']").val($(this).val());
            $("input[name='fin_cons_14']").val($(this).val());
            $("input[name='fin_cons_15']").val($(this).val());
        });
        $("input[name='pro_1']").keyup(function() {
            $("input[name='pro_2']").val($(this).val());
            $("input[name='pro_3']").val($(this).val());
            $("input[name='pro_4']").val($(this).val());
            $("input[name='pro_5']").val($(this).val());
            $("input[name='pro_6']").val($(this).val());
            $("input[name='pro_7']").val($(this).val());
            $("input[name='pro_8']").val($(this).val());
            $("input[name='pro_9']").val($(this).val());
            $("input[name='pro_10']").val($(this).val());
            $("input[name='pro_11']").val($(this).val());
            $("input[name='pro_12']").val($(this).val());
            $("input[name='pro_13']").val($(this).val());
            $("input[name='pro_14']").val($(this).val());
            $("input[name='pro_15']").val($(this).val());
        });
        $("input[name='rate_1']").keyup(function() {
            $("input[name='rate_2']").val($(this).val());
            $("input[name='rate_3']").val($(this).val());
            $("input[name='rate_4']").val($(this).val());
            $("input[name='rate_5']").val($(this).val());
            $("input[name='rate_6']").val($(this).val());
            $("input[name='rate_7']").val($(this).val());
            $("input[name='rate_8']").val($(this).val());
            $("input[name='rate_9']").val($(this).val());
            $("input[name='rate_10']").val($(this).val());
            $("input[name='rate_11']").val($(this).val());
            $("input[name='rate_12']").val($(this).val());
            $("input[name='rate_13']").val($(this).val());
            $("input[name='rate_14']").val($(this).val());
            $("input[name='rate_15']").val($(this).val());
        });
        $("input[name='a3']").keyup(function() {
            $("input[name='b3']").val($(this).val());
        });
    };
    var unbindGroups = function() {
        $("input[name='dia_1']").unbind("keyup");
        $("input[name='fin_cons_1']").unbind("keyup");
        $("input[name='pro_1']").unbind("keyup");
        $("input[name='rate_1']").unbind("keyup");
      
    };
    // COPY PANEL GREY CONSUMPTIN 
    function GreyCons(id){
        document.getElementById(`id_unit_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_fin_cons_${rightID(id)}`).value, 10) / (1.00 - (parseFloat(document.getElementById(`id_pro_${rightID(id)}`).value, 10)) / 100)).toFixed(4)
        totalQty(id)
        total('ttFinish')
        total('ttProcess')
        total('totalGreyCons')
        avg('avgFinish')
        avg('avgProcess')
        avg('avgGreyCons')
        pipeline()
    }

    function totalQty(id){
        document.getElementById(`id_tt_qty_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_qty_${rightID(id)}`).value, 10) / parseFloat(document.getElementById(`id_pcs_${rightID(id)}`).value, 10) * parseFloat(document.getElementById(`id_unit_${rightID(id)}`).value, 10)).toFixed(2)
    }

    function totalAmt(id){
        document.getElementById(`id_tt_amt_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_rate_${rightID(id)}`).value, 10) * parseFloat(document.getElementById(`id_tt_qty_${rightID(id)}`).value, 10)).toFixed(2)
        greyCons(id)
        total('ttRate')
        avg('avgRate')
        pipeline()
    }

    function greyCons(id){
        document.getElementById(`id_amt_${rightID(id)}`).value = (parseFloat(document.getElementById(`id_unit_${rightID(id)}`).value, 10) * parseFloat(document.getElementById(`id_rate_${rightID(id)}`).value, 10)).toFixed(2)
        total('ttAmt')
        total('ttQty')
        total('masTtAmt')
        avg('avgAmt')
        avg('avgQty')
        avg('avgmasTtAmt')
        pipeline()
    }

    function total(type){
        var total = 0
        for(var i = 0; i<parseInt(color_count); i++){
            total += parseFloat(document.getElementById(`${total_conv[type]}${i+1}`).value, 10)
        }
        document.getElementById(type).value = total
    }

    function avg(type){
        var total = 0
        for(var i = 0; i<parseInt(color_count); i++){
            total += parseFloat(document.getElementById(`${avg_conv[type]}${i+1}`).value, 10)
        }
        document.getElementById(type).value = total / color_count
    }

    function pipeline(){
        document.getElementById(`id_fabric_inline-V-avg_grey_cons`.replaceAt(17, working_id)).value = document.getElementById(`avgGreyCons`).value
        document.getElementById(`id_fabric_inline-V-rate`.replaceAt(17, working_id)).value = document.getElementById('avgRate').value
        document.getElementById(`id_fabric_inline-V-amount`.replaceAt(17, working_id)).value = document.getElementById('avgAmt').value
        document.getElementById(`id_fabric_inline-V-total_quantity`.replaceAt(17, working_id)).value = document.getElementById('avgQty').value
        document.getElementById(`id_fabric_inline-V-total_amount`.replaceAt(17, working_id)).value = document.getElementById('avgmasTtAmt').value
    }

    function passID(id){
        working_id = rightID(id)
    }

    function colorContrast(id){
        conWorkingId = rightID(id)
        if(document.getElementById(id).value == 2){
            document.getElementById("id_fabric_inline-V-color".replaceAt(17, rightID(id))).disabled = false
            $('#contrastColorModal').modal("show")
        }else if(document.getElementById(id).value == 1){
            document.getElementById("id_fabric_inline-V-color".replaceAt(17, rightID(id))).disabled = true
        }else{
            document.getElementById("id_fabric_inline-V-color".replaceAt(17, rightID(id))).disabled = false
        }
    }

    function passColorCon(){
        for(var i = 0; i<parseInt(conColorCount); i++){
            if('id_contrast_color_V'.replaceAt(18, i+1).value != ''){
                document.getElementById('id_fabric_inline-V-color'.replaceAt(17, conWorkingId)).value = document.getElementById('id_contrast_color_V'.replaceAt(18, i+1)).value
                break
            }
        }
    }
    // FABRIC DESC
    function fabricationDes(id){
        var construction = document.getElementById(`td-${rightID(id)}`).children[2].innerText
        var fabdescription = document.getElementById(`td-${rightID(id)}`).children[7].innerText
        var fabComp= construction + ' ' + ' ' + fabdescription;
        document.getElementById('id_fabric_inline-V-fabric_desc'.replaceAt(17, working_id)).value = fabComp
        document.getElementById('id_fabric_inline-V-gms'.replaceAt(17, working_id)).value = document.getElementById(`td-${rightID(id)}`).children[3].innerText
    }
    //BODY PART
    function bodyPart(id){
        document.getElementById('id_fabric_inline-V-body_part'.replaceAt(17, working_id)).value = document.getElementById(`bodytd-${rightID(id)}`).children[1].innerText
        document.getElementById('id_fabric_inline-V-body_part_type'.replaceAt(17, working_id)).value = document.getElementById(`bodytd-${rightID(id)}`).children[2].innerText
    }
    //GARMENTS ITEM
    function gmtItem(id){
        document.getElementById('id_fabric_inline-V-gmts_items'.replaceAt(17, working_id)).value = document.getElementById(`gmt-${rightID(id)}`).children[1].innerText
    }

    function conProcess(id){
        conWorkingId = rightID(id)
        if(document.getElementById(id).value == 3){
            $('#knittingItem').modal("show")
        }else if(document.getElementById(id).value == 2){
            $('#dyeingForm').modal("show")
        }
  }
  //CONVERSION COST KNITTING ITEM RATE 
  function knitItem(id){
        document.getElementById('id_conver_inline-V-charge_unit'.replaceAt(17, working_id)).value = document.getElementById(`knit-${rightID(id)}`).children[8].innerText
    }

    //CONVERSION COST DYEING ITEM RATE 
    function dyeingItem(id){ 
        document.getElementById(`id_charge_${rightID(id)}`).value = document.getElementById(`dyeing-${rightID(id)}`).children[8].innerText
    }

    // FABRIC COUNTER FOR YARN
    function febCount(){
        fCout = 0
        for(var i = 0; i<count; i++){
            if(document.getElementById('id_fabric_inline-V-fabric_desc'.replaceAt(17, i)).value.includes('+')){
                fCout += 2
            }else{
                fCout++
            }
        }
        fCout_g = fCout
    }
    // YARN COST
    function getYarn(){
        for(var i = 0; i<febCount(); i++){
            document.getElementsByClassName('btn btn-sm btn-warning mt-4 mb-3 mb-yarn')[0].click()
        }
    }
    // click on the div FOR SHOWING HIDE DIV FOR COSTING
    function fabric(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        // for hiding
        fabric.el = el;
        // stop the event right here
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function trim(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function embllish(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function wash(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function commercial(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    function commission(e, id) {
        var el = document.getElementById(id);
        el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none';
        fabric.el = el;
        if (e.stopPropagation) e.stopPropagation();
        e.cancelBubble = true;
        return false;
    }
    
</script> -->

<!-- COLOR CONTRAST  -->
<script>
    // COLOR CONTRAST ACTIVE MODAL 
    $(document).ready(function(){ 
        $('#colorSelect').change(function() { 
            var opval = $(this).val();
            if(opval=="2"){
                $('#contrastColor').modal("show");
            }
        });
    });
</script>
<!-- DOUBLE CLICK AND COLOR CONTRAST READ ONLY  -->
<script type="text/javascript">
    $(function () {
            document.getElementById("job_no").addEventListener("dblclick", function() {
            location.href = "{% url 'order_selection' %}";
            });
      });

     function colorOptions(obj) {
         var c = document.getElementById("color");
         c.readOnly = obj.value == "1";
     }
</script>
<!-- BODY PARTS LIBRARY MODAL  -->
<script>
    $(document).ready(function() {
      // Setup - add a text input to each footer cell
      $('#bp_reports #tfooter th').each( function () {
          var title = $(this).text();
          $(this).html( '<input type="text" class="form-control" placeholder="Search" />' );
      });
    
    //For Modal Adminlte Datatable scrolly and scrollx problem solved
      $('#body_part').on('shown.bs.modal',function(){
        tableModal = $("#bp_reports").DataTable({
        "paging":false,
        "scrollX":true,
        "scrollY":470,
        "destroy":true
        });
    });
      // DataTable
      var table = $('#bp_reports').DataTable({
          initComplete: function () {
              // Apply the search
              this.api().columns().every( function () {
                  var that = this;
                  $( 'input', this.footer() ).on( 'keyup change clear', function () {
                      if ( that.search() !== this.value ) {
                          that
                            .search( this.value )
                            .draw();
                      }
                  } );
              } );
          }
      });
  });
</script>
<!-- FABRIC DESCRIPTION LIBRARY MODAL  -->
<script>
    $(document).ready(function() {
      // Setup - add a text input to each footer cell
      $('#fabric_desc_report #tfooter th').each( function () {
          var title = $(this).text();
          $(this).html( '<input type="text" class="fabDesSearch" placeholder="Search" />' );
      });

    //For Modal Adminlte Datatable scrolly and scrollx problem solved
      $('#fabricDesc').on('shown.bs.modal',function(){
        tableModal = $("#fabric_desc_report").DataTable({
        "paging":false,
        "scrollX":true,
        "scrollY":470,
        "destroy":true
        });
    });
    
      // DataTable
      var table = $('#fabric_desc_report').DataTable({
          initComplete: function () {
              // Apply the search
              this.api().columns().every( function () {
                  var that = this;
                  $( 'input', this.footer() ).on( 'keyup change clear', function () {
                      if ( that.search() !== this.value ) {
                          that
                            .search( this.value )
                            .draw();
                      }
                  } );
              } );
          }
      });
  });
</script>
<!-- GARMETNS ITEM MODAL LIBRARY -->
<script>
    $(document).ready(function() {
      // Setup - add a text input to each footer cell
      $('#gmtsTable #tfooter th').each( function () {
          var title = $(this).text();
          $(this).html( '<input type="text" class="form-control" placeholder="Search" />' );
      });
      $('#trimCountry #tfooter th').each( function () {
          var title = $(this).text();
          $(this).html( '<input type="text" class="form-control" placeholder="Search" />' );
      });
      //For Modal Adminlte Datatable scrolly and scrollx problem solved
      $('#gmtsItem').on('shown.bs.modal',function(){
        tableModal = $("#gmtsTable").DataTable({
        "paging":false,
        "scrollX":true,
        "scrollY":170,
        "info":false,
        "destroy":true
        });
    });
      var table = $('#gmtsTable').DataTable({
          initComplete: function () {
              this.api().columns().every( function () {
                  var that = this;
                  $( 'input', this.footer() ).on( 'keyup change clear', function () {
                      if ( that.search() !== this.value ) {
                          that
                            .search( this.value )
                            .draw();
                      }
                  } );
              } );
          }
      });
  });
</script>

<!-- KNITTING ITEM MODAL LIBRARY -->
<script>
    $(document).ready(function() {
      // Setup - add a text input to each footer cell
      $('#knittingTable #tfooter th').each( function () {
          var title = $(this).text();
          $(this).html( '<input type="text" class="form-control" placeholder="Search" />' );
      });
      //For Modal Adminlte Datatable scrolly and scrollx problem solved
      $('#knittingItem').on('shown.bs.modal',function(){
        tableModal = $("#knittingTable").DataTable({
        "paging":false,
        "scrollX":true,
        "scrollY":170,
        "info":false,
        "destroy":true
        });
    });
      var table = $('#knittingTable').DataTable({
          initComplete: function () {
              this.api().columns().every( function () {
                  var that = this;
                  $( 'input', this.footer() ).on( 'keyup change clear', function () {
                      if ( that.search() !== this.value ) {
                          that
                            .search( this.value )
                            .draw();
                      }
                  } );
              } );
          }
      });
  });
</script>
<!-- BUDGET COSTING FORM NO RELOAD  -->
<script type="text/javascript"> 
    // SUBMIT FORM WITHOUT PAGE RELOAD ; IMAGE AND FILE SEND VIA AJAX & DJANGO
        $('#c_form').submit(function(event){
            event.preventDefault();
            var form = $(this)
            url = form.attr('action')
            var formData = new FormData(this);
            $.ajax({
                url: url,
                type: 'POST',
                data: formData,
                success: function (response) {
                    alert("Your Budget Cost Successfully Added. Please add below form as well.");
                },
                error: function (response) {
                    alert("Something Went Wrong...");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        });
</script> 
<!-- FABRIC COST NO RELOAD  -->
<script type="text/javascript"> 
    // SUBMIT FORM WITHOUT PAGE RELOAD ; IMAGE AND FILE SEND VIA AJAX & DJANGO
        $('#fc_form').submit(function(event){
            event.preventDefault();
            var form = $(this)
            url = form.attr('action')
            var formData = new FormData(this);
            $.ajax({
                url: url,
                type: 'POST',
                data: formData,
                success: function (response) {
                    alert("Your Fabric Cost Successfully Added. Please add below form as well.");
                },
                error: function (response) {
                    alert("Something Went Wrong...");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        });
</script> 
<!--  GREY CONSUMPTION NO RELOAD  -->
<script type="text/javascript"> 
    // SUBMIT FORM WITHOUT PAGE RELOAD ; IMAGE AND FILE SEND VIA AJAX & DJANGO
    $("#greyForm").submit(function(event){
        event.preventDefault();
        var form = $(this)
        url = form.attr('action')
        var formData = new FormData(this);
        $.ajax({
            url: url,
            type: 'POST',
            data: formData,
            success: function (response) {
                alert("Your COLOR & SIZE: AVERAGE GREY CONSUMPTION Successfully Added. Please add below form as well.")
            },
            error: function (response) {
                alert("Something Went Wrong...")
            },
            cache: false,
            contentType: false,
            processData: false
        });
    });
</script>
<!--  COLOR CONTRAST NO RELOAD  -->
<script type="text/javascript"> 
    // SUBMIT FORM WITHOUT PAGE RELOAD ; IMAGE AND FILE SEND VIA AJAX & DJANGO
    $("#contForm").submit(function(event){
        event.preventDefault();
        var form = $(this)
        url = form.attr('action')
        var formData = new FormData(this);
        $.ajax({
            url: url,
            type: 'POST',
            data: formData,
            success: function (response) {
                alert("Your COLOR & SIZE: AVERAGE GREY CONSUMPTION Successfully Added. Please add below form as well.")
            },
            error: function (response) {
                alert("Something Went Wrong...")
            },
            cache: false,
            contentType: false,
            processData: false
        });
    });
</script>

<!--  CONVERSION COST NO RELOAD  -->
<script type="text/javascript"> 
    // SUBMIT FORM WITHOUT PAGE RELOAD ; IMAGE AND FILE SEND VIA AJAX & DJANGO
    $("#cc_form").submit(function(event){
        event.preventDefault();
        var form = $(this)
        url = form.attr('action')
        var formData = new FormData(this);
        $.ajax({
            url: url,
            type: 'POST',
            data: formData,
            success: function (response) {
                alert("Your conversion cost information Successfully Added. Please add below form as well.")
            },
            error: function (response) {
                alert("Something Went Wrong...")
            },
            cache: false,
            contentType: false,
            processData: false
        });
    });
</script>

<!--  DYEING ITMS FROM NO RELOAD  -->
<script type="text/javascript"> 
    // SUBMIT FORM WITHOUT PAGE RELOAD ; IMAGE AND FILE SEND VIA AJAX & DJANGO
    $("#DyeingForm").submit(function(event){
        event.preventDefault();
        var form = $(this)
        url = form.attr('action')
        var formData = new FormData(this);
        $.ajax({
            url: url,
            type: 'POST',
            data: formData,
            success: function (response) {
                alert("Your dyeing color items info Successfully Added. Please add below form as well.")
            },
            error: function (response) {
                alert("Something Went Wrong...")
            },
            cache: false,
            contentType: false,
            processData: false
        });
    });
</script>

<!-- Trim COST NO RELOAD  -->
<script type="text/javascript"> 
    // SUBMIT FORM WITHOUT PAGE RELOAD ; IMAGE AND FILE SEND VIA AJAX & DJANGO
        $('#tc_form').submit(function(event){
            event.preventDefault();
            var form = $(this)
            url = form.attr('action')
            var formData = new FormData(this);
            $.ajax({
                url: url,
                type: 'POST',
                data: formData,
                success: function (response) {
                    alert("Your Yarn Cost Successfully Added. Please add below form as well.");
                },
                error: function (response) {
                    alert("Something Went Wrong...");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        });
</script> 

<!-- CARE LEBEL COST NO RELOAD  -->
<script type="text/javascript"> 
    // SUBMIT FORM WITHOUT PAGE RELOAD ; IMAGE AND FILE SEND VIA AJAX & DJANGO
        $('#CLForm').submit(function(event){
            event.preventDefault();
            var form = $(this)
            url = form.attr('action')
            var formData = new FormData(this);
            $.ajax({
                url: url,
                type: 'POST',
                data: formData,
                success: function (response) {
                    alert("Your care lebel information successfully added. Please add below form as well.");
                },
                error: function (response) {
                    alert("Something Went Wrong...");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        });
</script> 

<!-- GROUPS MODAL LIBRARY -->
<script>
    $(document).ready(function() {
      // Setup - add a text input to each footer cell
      $('#trimGroupTable #tfooter th').each( function () {
          var title = $(this).text();
          $(this).html( '<input type="text" class="form-control" placeholder="Search" />' );
      });
      //For Modal Adminlte Datatable scrolly and scrollx problem solved
      $('#trimGroup').on('shown.bs.modal',function(){
        tableModal = $("#trimGroupTable").DataTable({
        "paging":false,
        "scrollX":true,
        "scrollY":170,
        "info":false,
        "destroy":true
        });
    });
      var table = $('#trimGroupTable').DataTable({
          initComplete: function () {
              this.api().columns().every( function () {
                  var that = this;
                  $( 'input', this.footer() ).on( 'keyup change clear', function () {
                      if ( that.search() !== this.value ) {
                          that
                            .search( this.value )
                            .draw();
                      }
                  } );
              } );
          }
      });
  });
</script>

<!-- SHOW HIDE CALCULATOR  -->
<script>
    $(document).ready(function(){
        $('.showHideCalc').click(function(){
            var inputValue = $(this).attr("value");
            var targetBox = $("." + inputValue);
            $(".hideBox").not(targetBox).hide();
            $(targetBox).show();
        });
    });
</script>

{% endblock script %}
